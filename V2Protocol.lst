   1               		.file	"V2Protocol.c"
   2               		.arch atmega169
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	Param_ControllerInit
  19               	.global	Param_ControllerInit
  20               		.section .bss
  23               	Param_ControllerInit:
  24 0000 00        		.skip 1,0
  25               	.global	CurrAddress
  26               	.global	CurrAddress
  29               	CurrAddress:
  30 0001 0000 0000 		.skip 4,0
  31               	.global	InProgrammingMode
  32               	.global	InProgrammingMode
  35               	InProgrammingMode:
  36 0005 00        		.skip 1,0
  37               	.global	MessageSize
  38               	.global	MessageSize
  41               	MessageSize:
  42 0006 0000      		.skip 2,0
  43               	.global	SequenceNum
  44               	.global	SequenceNum
  47               	SequenceNum:
  48 0008 0000      		.skip 2,0
  49               	.global	PacketBytes
  50               	.global	PacketBytes
  53               	PacketBytes:
  54 000a 0000 0000 		.skip 275,0
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  55               	.global	InterpretPacketRoutine
  56               		.data
  59               	InterpretPacketRoutine:
  60 0000 0000      		.word	pm(AICI_InterpretPacket)
  61               	.global	SignonResponse
  62               		.section	.progmem.data,"a",@progbits
  65               	SignonResponse:
  66 0000 01        		.byte	1
  67 0001 00        		.byte	0
  68 0002 08        		.byte	8
  69 0003 41        		.byte	65
  70 0004 56        		.byte	86
  71 0005 52        		.byte	82
  72 0006 49        		.byte	73
  73 0007 53        		.byte	83
  74 0008 50        		.byte	80
  75 0009 5F        		.byte	95
  76 000a 32        		.byte	50
  77               		.text
  78               	.global	V2P_GetChecksum
  80               	V2P_GetChecksum:
  81               	.LFB16:
  82               	.LM1:
  83               	/* prologue: frame size=0 */
  84               	/* prologue end (size=0) */
  85               	.LM2:
  86 0000 6BE1      		ldi r22,lo8(27)
  87               	.LM3:
  88 0002 8091 0000 		lds r24,SequenceNum
  89 0006 6827      		eor r22,r24
  90               	.LM4:
  91 0008 2091 0000 		lds r18,MessageSize
  92 000c 3091 0000 		lds r19,(MessageSize)+1
  93 0010 832F      		mov r24,r19
  94 0012 9927      		clr r25
  95 0014 6827      		eor r22,r24
  96               	.LM5:
  97 0016 8091 0000 		lds r24,MessageSize
  98 001a 6827      		eor r22,r24
  99               	.LM6:
 100 001c 8EE0      		ldi r24,lo8(14)
 101 001e 6827      		eor r22,r24
 102               	.LBB2:
 103               	.LM7:
 104 0020 40E0      		ldi r20,lo8(0)
 105 0022 50E0      		ldi r21,hi8(0)
 106 0024 4217      		cp r20,r18
 107 0026 5307      		cpc r21,r19
 108 0028 48F4      		brsh .L7
 109 002a E0E0      		ldi r30,lo8(PacketBytes)
 110 002c F0E0      		ldi r31,hi8(PacketBytes)
 111               	.L5:
 112               	.LM8:
 113 002e 8191      		ld r24,Z+
 114 0030 6827      		eor r22,r24
 115               	.LM9:
 116 0032 4F5F      		subi r20,lo8(-(1))
 117 0034 5F4F      		sbci r21,hi8(-(1))
 118 0036 4217      		cp r20,r18
 119 0038 5307      		cpc r21,r19
 120 003a C8F3      		brlo .L5
 121               	.L7:
 122               	.LBE2:
 123               	.LM10:
 124 003c 862F      		mov r24,r22
 125 003e 9927      		clr r25
 126               	/* epilogue: frame size=0 */
 127 0040 0895      		ret
 128               	/* epilogue end (size=1) */
 129               	/* function V2P_GetChecksum size 33 (32) */
 130               	.LFE16:
 132               	.global	V2P_SendPacket
 134               	V2P_SendPacket:
 135               	.LFB15:
 136               	.LM11:
 137               	/* prologue: frame size=0 */
 138 0042 0F93      		push r16
 139 0044 1F93      		push r17
 140 0046 CF93      		push r28
 141 0048 DF93      		push r29
 142               	/* prologue end (size=4) */
 143               	.LM12:
 144 004a 8BE1      		ldi r24,lo8(27)
 145 004c 0E94 0000 		call USART_Tx
 146               	.LM13:
 147 0050 8091 0000 		lds r24,SequenceNum
 148 0054 0E94 0000 		call USART_Tx
 149               	.LM14:
 150 0058 8091 0000 		lds r24,MessageSize+1
 151 005c 0E94 0000 		call USART_Tx
 152               	.LM15:
 153 0060 8091 0000 		lds r24,MessageSize
 154 0064 0E94 0000 		call USART_Tx
 155               	.LM16:
 156 0068 8EE0      		ldi r24,lo8(14)
 157 006a 0E94 0000 		call USART_Tx
 158               	.LBB3:
 159               	.LM17:
 160 006e C0E0      		ldi r28,lo8(0)
 161 0070 D0E0      		ldi r29,hi8(0)
 162 0072 8091 0000 		lds r24,MessageSize
 163 0076 9091 0000 		lds r25,(MessageSize)+1
 164 007a C817      		cp r28,r24
 165 007c D907      		cpc r29,r25
 166 007e 78F4      		brsh .L14
 167 0080 00E0      		ldi r16,lo8(PacketBytes)
 168 0082 10E0      		ldi r17,hi8(PacketBytes)
 169               	.L12:
 170               	.LM18:
 171 0084 F801      		movw r30,r16
 172 0086 8191      		ld r24,Z+
 173 0088 8F01      		movw r16,r30
 174 008a 0E94 0000 		call USART_Tx
 175               	.LM19:
 176 008e 2196      		adiw r28,1
 177 0090 8091 0000 		lds r24,MessageSize
 178 0094 9091 0000 		lds r25,(MessageSize)+1
 179 0098 C817      		cp r28,r24
 180 009a D907      		cpc r29,r25
 181 009c 98F3      		brlo .L12
 182               	.L14:
 183               	.LBE3:
 184               	.LM20:
 185 009e 0E94 0000 		call V2P_GetChecksum
 186 00a2 0E94 0000 		call USART_Tx
 187               	.LM21:
 188 00a6 8091 0000 		lds r24,SequenceNum
 189 00aa 9091 0000 		lds r25,(SequenceNum)+1
 190 00ae 0196      		adiw r24,1
 191 00b0 9093 0000 		sts (SequenceNum)+1,r25
 192 00b4 8093 0000 		sts SequenceNum,r24
 193               	/* epilogue: frame size=0 */
 194 00b8 DF91      		pop r29
 195 00ba CF91      		pop r28
 196 00bc 1F91      		pop r17
 197 00be 0F91      		pop r16
 198 00c0 0895      		ret
 199               	/* epilogue end (size=5) */
 200               	/* function V2P_SendPacket size 64 (55) */
 201               	.LFE15:
 203               	.global	V2P_GetSetParamater
 205               	V2P_GetSetParamater:
 206               	.LFB17:
 207               	.LM22:
 208               	/* prologue: frame size=0 */
 209               	/* prologue end (size=0) */
 210               	.LM23:
 211 00c2 2091 0000 		lds r18,PacketBytes+1
 212               	.LM24:
 213 00c6 83E0      		ldi r24,lo8(3)
 214 00c8 90E0      		ldi r25,hi8(3)
 215 00ca 9093 0000 		sts (MessageSize)+1,r25
 216 00ce 8093 0000 		sts MessageSize,r24
 217               	.LM25:
 218 00d2 1092 0000 		sts PacketBytes+1,__zero_reg__
 219               	.LM26:
 220 00d6 3327      		clr r19
 221 00d8 2239      		cpi r18,146
 222 00da 3105      		cpc r19,__zero_reg__
 223 00dc 69F1      		breq .L21
 224               	.LM27:
 225 00de 2339      		cpi r18,147
 226 00e0 3105      		cpc r19,__zero_reg__
 227 00e2 8CF4      		brge .L44
 228 00e4 2138      		cpi r18,129
 229 00e6 3105      		cpc r19,__zero_reg__
 230 00e8 19F1      		breq .L18
 231 00ea 2238      		cpi r18,130
 232 00ec 3105      		cpc r19,__zero_reg__
 233 00ee 24F4      		brge .L45
 234 00f0 2038      		cpi r18,128
 235 00f2 3105      		cpc r19,__zero_reg__
 236 00f4 D9F0      		breq .L17
 237 00f6 7DC0      		rjmp .L43
 238               	.L45:
 239 00f8 2039      		cpi r18,144
 240 00fa 3105      		cpc r19,__zero_reg__
 241 00fc D9F0      		breq .L20
 242 00fe 2139      		cpi r18,145
 243 0100 3105      		cpc r19,__zero_reg__
 244 0102 C1F0      		breq .L20
 245 0104 76C0      		rjmp .L43
 246               	.L44:
 247 0106 2839      		cpi r18,152
 248 0108 3105      		cpc r19,__zero_reg__
 249 010a A1F1      		breq .L29
 250 010c 2939      		cpi r18,153
 251 010e 3105      		cpc r19,__zero_reg__
 252 0110 2CF4      		brge .L46
 253 0112 2639      		cpi r18,150
 254 0114 3105      		cpc r19,__zero_reg__
 255 0116 0CF4      		brge .+2
 256 0118 6CC0      		rjmp .L43
 257 011a 5DC0      		rjmp .L40
 258               	.L46:
 259 011c 2E39      		cpi r18,158
 260 011e 3105      		cpc r19,__zero_reg__
 261 0120 09F4      		brne .+2
 262 0122 3EC0      		rjmp .L34
 263 0124 2F39      		cpi r18,159
 264 0126 3105      		cpc r19,__zero_reg__
 265 0128 99F0      		breq .L26
 266 012a 63C0      		rjmp .L43
 267               	.L17:
 268               	.LM28:
 269 012c 83E0      		ldi r24,lo8(3)
 270 012e 41C0      		rjmp .L48
 271               	.L18:
 272               	.LM29:
 273 0130 81E0      		ldi r24,lo8(1)
 274 0132 3FC0      		rjmp .L48
 275               	.L20:
 276               	.LM30:
 277 0134 82E0      		ldi r24,lo8(2)
 278 0136 3DC0      		rjmp .L48
 279               	.L21:
 280               	.LBB4:
 281               	.LM31:
 282 0138 A0E0      		ldi r26,lo8(EEPROMVars+134)
 283 013a B0E0      		ldi r27,hi8(EEPROMVars+134)
 284 013c 9D01      		movw r18,r26
 285               	.LBB5:
 286               	.LM32:
 287               	/* #APP */
 288 013e 0E94 0000 		call __eeprom_read_byte_1F2021
 289 0142 802D      		mov r24,__tmp_reg__
 290               	/* #NOAPP */
 291               	.LBE5:
 292               	.LBE4:
 293               	.LM33:
 294 0144 8F3F      		cpi r24,lo8(-1)
 295 0146 11F0      		breq .L22
 296               	.LBB6:
 297               	.LBB7:
 298               	.LM34:
 299 0148 D901      		movw r26,r18
 300 014a 30C0      		rjmp .L47
 301               	.L22:
 302               	.LBE7:
 303               	.LBE6:
 304               	.LM35:
 305 014c 84E0      		ldi r24,lo8(4)
 306 014e 31C0      		rjmp .L48
 307               	.L26:
 308               	.LM36:
 309 0150 8091 0000 		lds r24,PacketBytes
 310 0154 8330      		cpi r24,lo8(3)
 311 0156 19F4      		brne .L27
 312               	.LM37:
 313 0158 8091 0000 		lds r24,Param_ControllerInit
 314 015c 2AC0      		rjmp .L48
 315               	.L27:
 316               	.LM38:
 317 015e 82E0      		ldi r24,lo8(2)
 318 0160 90E0      		ldi r25,hi8(2)
 319 0162 9093 0000 		sts (MessageSize)+1,r25
 320 0166 8093 0000 		sts MessageSize,r24
 321               	.LM39:
 322 016a 8091 0000 		lds r24,PacketBytes+2
 323 016e 8093 0000 		sts Param_ControllerInit,r24
 324               	.LM40:
 325 0172 48C0      		rjmp .L16
 326               	.L29:
 327               	.LM41:
 328 0174 8091 0000 		lds r24,PacketBytes
 329 0178 A0E0      		ldi r26,lo8(EEPROMVars+1)
 330 017a B0E0      		ldi r27,hi8(EEPROMVars+1)
 331 017c 8330      		cpi r24,lo8(3)
 332 017e B1F0      		breq .L47
 333               	.LM42:
 334 0180 82E0      		ldi r24,lo8(2)
 335 0182 90E0      		ldi r25,hi8(2)
 336 0184 9093 0000 		sts (MessageSize)+1,r25
 337 0188 8093 0000 		sts MessageSize,r24
 338               	.LBB8:
 339               	.LM43:
 340 018c 8091 0000 		lds r24,PacketBytes+2
 341               	.LBB9:
 342               	.LM44:
 343               	/* #APP */
 344 0190 082E      		mov __tmp_reg__,r24
 345 0192 0E94 0000 		call __eeprom_write_byte_1F2021
 346               	/* #NOAPP */
 347               	.LBE9:
 348               	.LBE8:
 349               	.LM45:
 350 0196 8091 0000 		lds r24,PacketBytes+2
 351 019a 0E94 0000 		call USI_SPISetSpeed
 352               	.LM46:
 353 019e 32C0      		rjmp .L16
 354               	.L34:
 355               	.LM47:
 356 01a0 8091 0000 		lds r24,PacketBytes
 357 01a4 A0E0      		ldi r26,lo8(EEPROMVars)
 358 01a6 B0E0      		ldi r27,hi8(EEPROMVars)
 359 01a8 8330      		cpi r24,lo8(3)
 360 01aa 31F4      		brne .L35
 361               	.L47:
 362               	.LBB10:
 363               	.LBB11:
 364               	.LM48:
 365               	/* #APP */
 366 01ac 0E94 0000 		call __eeprom_read_byte_1F2021
 367 01b0 802D      		mov r24,__tmp_reg__
 368               	/* #NOAPP */
 369               	.L48:
 370               	.LBE11:
 371               	.LBE10:
 372               	.LM49:
 373 01b2 8093 0000 		sts PacketBytes+2,r24
 374 01b6 26C0      		rjmp .L16
 375               	.L35:
 376               	.LM50:
 377 01b8 82E0      		ldi r24,lo8(2)
 378 01ba 90E0      		ldi r25,hi8(2)
 379 01bc 9093 0000 		sts (MessageSize)+1,r25
 380 01c0 8093 0000 		sts MessageSize,r24
 381               	.LBB12:
 382               	.LM51:
 383 01c4 8091 0000 		lds r24,PacketBytes+2
 384               	.LBB13:
 385               	.LM52:
 386               	/* #APP */
 387 01c8 082E      		mov __tmp_reg__,r24
 388 01ca 0E94 0000 		call __eeprom_write_byte_1F2021
 389               	/* #NOAPP */
 390               	.LBE13:
 391               	.LBE12:
 392               	.LM53:
 393 01ce 81E0      		ldi r24,lo8(1)
 394 01d0 0E94 0000 		call MAIN_ResetCSLine
 395               	.LM54:
 396 01d4 17C0      		rjmp .L16
 397               	.L40:
 398               	.LM55:
 399 01d6 8091 0000 		lds r24,PacketBytes
 400 01da 8330      		cpi r24,lo8(3)
 401 01dc 19F4      		brne .L41
 402               	.LM56:
 403 01de 1092 0000 		sts PacketBytes+2,__zero_reg__
 404 01e2 10C0      		rjmp .L16
 405               	.L41:
 406               	.LM57:
 407 01e4 82E0      		ldi r24,lo8(2)
 408 01e6 90E0      		ldi r25,hi8(2)
 409 01e8 9093 0000 		sts (MessageSize)+1,r25
 410 01ec 8093 0000 		sts MessageSize,r24
 411               	.LM58:
 412 01f0 09C0      		rjmp .L16
 413               	.L43:
 414               	.LM59:
 415 01f2 82E0      		ldi r24,lo8(2)
 416 01f4 90E0      		ldi r25,hi8(2)
 417 01f6 9093 0000 		sts (MessageSize)+1,r25
 418 01fa 8093 0000 		sts MessageSize,r24
 419               	.LM60:
 420 01fe 80EC      		ldi r24,lo8(-64)
 421 0200 8093 0000 		sts PacketBytes+1,r24
 422               	.L16:
 423               	.LM61:
 424 0204 0E94 0000 		call V2P_SendPacket
 425               	/* epilogue: frame size=0 */
 426 0208 0895      		ret
 427               	/* epilogue end (size=1) */
 428               	/* function V2P_GetSetParamater size 168 (167) */
 429               	.LFE17:
 431               	.global	V2P_IncrementCurrAddress
 433               	V2P_IncrementCurrAddress:
 434               	.LFB18:
 435               	.LM62:
 436               	/* prologue: frame size=0 */
 437               	/* prologue end (size=0) */
 438               	.LM63:
 439 020a 8091 0000 		lds r24,CurrAddress
 440 020e 9091 0000 		lds r25,(CurrAddress)+1
 441 0212 A091 0000 		lds r26,(CurrAddress)+2
 442 0216 B091 0000 		lds r27,(CurrAddress)+3
 443 021a 0196      		adiw r24,1
 444 021c A11D      		adc r26,__zero_reg__
 445 021e B11D      		adc r27,__zero_reg__
 446 0220 8093 0000 		sts CurrAddress,r24
 447 0224 9093 0000 		sts (CurrAddress)+1,r25
 448 0228 A093 0000 		sts (CurrAddress)+2,r26
 449 022c B093 0000 		sts (CurrAddress)+3,r27
 450               	/* epilogue: frame size=0 */
 451 0230 0895      		ret
 452               	/* epilogue end (size=1) */
 453               	/* function V2P_IncrementCurrAddress size 20 (19) */
 454               	.LFE18:
 456               	.global	V2P_CheckForExtendedAddress
 458               	V2P_CheckForExtendedAddress:
 459               	.LFB19:
 460               	.LM64:
 461               	/* prologue: frame size=0 */
 462               	/* prologue end (size=0) */
 463               	.LM65:
 464 0232 8091 0000 		lds r24,CurrAddress
 465 0236 9091 0000 		lds r25,(CurrAddress)+1
 466 023a A091 0000 		lds r26,(CurrAddress)+2
 467 023e B091 0000 		lds r27,(CurrAddress)+3
 468 0242 B7FF      		sbrs r27,7
 469 0244 1EC0      		rjmp .L50
 470               	.LM66:
 471 0246 8DE4      		ldi r24,lo8(77)
 472 0248 0E94 0000 		call USI_SPITransmit
 473               	.LM67:
 474 024c 80E0      		ldi r24,lo8(0)
 475 024e 0E94 0000 		call USI_SPITransmit
 476               	.LM68:
 477 0252 8091 0000 		lds r24,CurrAddress+2
 478 0256 0E94 0000 		call USI_SPITransmit
 479               	.LM69:
 480 025a 80E0      		ldi r24,lo8(0)
 481 025c 0E94 0000 		call USI_SPITransmit
 482               	.LM70:
 483 0260 8091 0000 		lds r24,CurrAddress
 484 0264 9091 0000 		lds r25,(CurrAddress)+1
 485 0268 A091 0000 		lds r26,(CurrAddress)+2
 486 026c B091 0000 		lds r27,(CurrAddress)+3
 487 0270 BF77      		andi r27,hhi8(2147483647)
 488 0272 8093 0000 		sts CurrAddress,r24
 489 0276 9093 0000 		sts (CurrAddress)+1,r25
 490 027a A093 0000 		sts (CurrAddress)+2,r26
 491 027e B093 0000 		sts (CurrAddress)+3,r27
 492               	.L50:
 493 0282 0895      		ret
 494               	/* epilogue: frame size=0 */
 495               	/* epilogue: noreturn */
 496               	/* epilogue end (size=0) */
 497               	/* function V2P_CheckForExtendedAddress size 41 (41) */
 498               	.LFE19:
 500               	.global	V2P_RunStateMachine
 502               	V2P_RunStateMachine:
 503               	.LFB14:
 504               	.LM71:
 505               	/* prologue: frame size=0 */
 506 0284 EF92      		push r14
 507 0286 FF92      		push r15
 508 0288 0F93      		push r16
 509 028a 1F93      		push r17
 510 028c CF93      		push r28
 511               	/* prologue end (size=5) */
 512               	.LM72:
 513 028e C0E0      		ldi r28,lo8(0)
 514               	.LM73:
 515 0290 EE24      		clr r14
 516 0292 FF24      		clr r15
 517               	.LM74:
 518 0294 0E94 0000 		call BUFF_InitialiseBuffer
 519               	.LM75:
 520 0298 C093 0000 		sts InProgrammingMode,r28
 521               	.LM76:
 522 029c 1092 0000 		sts CurrAddress,__zero_reg__
 523 02a0 1092 0000 		sts (CurrAddress)+1,__zero_reg__
 524 02a4 1092 0000 		sts (CurrAddress)+2,__zero_reg__
 525 02a8 1092 0000 		sts (CurrAddress)+3,__zero_reg__
 526               	.L110:
 527               	.LM77:
 528 02ac 8091 0000 		lds r24,TimeOut
 529 02b0 8130      		cpi r24,lo8(1)
 530 02b2 11F4      		brne .L55
 531               	.LM78:
 532 02b4 C9E0      		ldi r28,lo8(9)
 533 02b6 11C0      		rjmp .L56
 534               	.L55:
 535               	.LM79:
 536 02b8 CC23      		tst r28
 537 02ba 79F0      		breq .L56
 538               	.LM80:
 539 02bc 1092 0000 		sts TimeOut,__zero_reg__
 540 02c0 1092 0000 		sts Ticks,__zero_reg__
 541 02c4 1092 B200 		sts 178,__zero_reg__
 542 02c8 80EF      		ldi r24,lo8(-16)
 543 02ca 8093 B300 		sts 179,r24
 544 02ce 82E0      		ldi r24,lo8(2)
 545 02d0 8093 7000 		sts 112,r24
 546 02d4 8FE0      		ldi r24,lo8(15)
 547 02d6 8093 B000 		sts 176,r24
 548               	.L56:
 549               	.LM81:
 550 02da 8C2F      		mov r24,r28
 551 02dc 9927      		clr r25
 552 02de 8430      		cpi r24,4
 553 02e0 9105      		cpc r25,__zero_reg__
 554 02e2 09F4      		brne .+2
 555 02e4 70C0      		rjmp .L75
 556 02e6 8530      		cpi r24,5
 557 02e8 9105      		cpc r25,__zero_reg__
 558 02ea 94F4      		brge .L99
 559 02ec 8130      		cpi r24,1
 560 02ee 9105      		cpc r25,__zero_reg__
 561 02f0 09F4      		brne .+2
 562 02f2 4FC0      		rjmp .L70
 563 02f4 8230      		cpi r24,2
 564 02f6 9105      		cpc r25,__zero_reg__
 565 02f8 1CF4      		brge .L100
 566 02fa 892B      		or r24,r25
 567 02fc 99F1      		breq .L63
 568 02fe D6CF      		rjmp .L110
 569               	.L100:
 570 0300 8230      		cpi r24,2
 571 0302 9105      		cpc r25,__zero_reg__
 572 0304 09F4      		brne .+2
 573 0306 4BC0      		rjmp .L73
 574 0308 0397      		sbiw r24,3
 575 030a 09F4      		brne .+2
 576 030c 51C0      		rjmp .L74
 577 030e CECF      		rjmp .L110
 578               	.L99:
 579 0310 8730      		cpi r24,7
 580 0312 9105      		cpc r25,__zero_reg__
 581 0314 09F4      		brne .+2
 582 0316 88C0      		rjmp .L84
 583 0318 8830      		cpi r24,8
 584 031a 9105      		cpc r25,__zero_reg__
 585 031c 44F4      		brge .L101
 586 031e 8530      		cpi r24,5
 587 0320 9105      		cpc r25,__zero_reg__
 588 0322 09F4      		brne .+2
 589 0324 65C0      		rjmp .L78
 590 0326 0697      		sbiw r24,6
 591 0328 09F4      		brne .+2
 592 032a 6AC0      		rjmp .L81
 593 032c BFCF      		rjmp .L110
 594               	.L101:
 595 032e 8830      		cpi r24,8
 596 0330 9105      		cpc r25,__zero_reg__
 597 0332 81F0      		breq .L61
 598 0334 0997      		sbiw r24,9
 599 0336 09F0      		breq .+2
 600 0338 B9CF      		rjmp .L110
 601               	.LM82:
 602 033a 82E0      		ldi r24,lo8(2)
 603 033c 90E0      		ldi r25,hi8(2)
 604 033e 9093 0000 		sts (MessageSize)+1,r25
 605 0342 8093 0000 		sts MessageSize,r24
 606               	.LM83:
 607 0346 80EC      		ldi r24,lo8(-64)
 608 0348 8093 0000 		sts PacketBytes+1,r24
 609               	.LM84:
 610 034c 1092 0000 		sts TimeOut,__zero_reg__
 611               	.LM85:
 612 0350 0E94 0000 		call V2P_SendPacket
 613               	.L61:
 614               	.LM86:
 615 0354 0E94 0000 		call BUFF_InitialiseBuffer
 616               	.LM87:
 617 0358 1092 B000 		sts 176,__zero_reg__
 618 035c 1092 7000 		sts 112,__zero_reg__
 619               	.LM88:
 620 0360 C0E0      		ldi r28,lo8(0)
 621               	.LM89:
 622 0362 A4CF      		rjmp .L110
 623               	.L63:
 624               	.LM90:
 625 0364 8091 0000 		lds r24,BuffElements
 626 0368 8111      		cpse r24,__zero_reg__
 627               	.LM91:
 628 036a C1E0      		ldi r28,lo8(1)
 629               	.L64:
 630               	.LM92:
 631 036c F29B      		sbis 62-0x20,2
 632 036e 9ECF      		rjmp .L110
 633 0370 8091 0000 		lds r24,InProgrammingMode
 634 0374 8823      		tst r24
 635 0376 09F0      		breq .+2
 636 0378 99CF      		rjmp .L110
 637               	.LM93:
 638 037a 80E8      		ldi r24,lo8(-128)
 639 037c 8093 6100 		sts 97,r24
 640 0380 83E0      		ldi r24,lo8(3)
 641 0382 8093 6100 		sts 97,r24
 642 0386 8091 C100 		lds r24,193
 643 038a 8078      		andi r24,lo8(-128)
 644 038c 8093 C100 		sts 193,r24
 645               	.LM94:
 646 0390 D4C0      		rjmp .L52
 647               	.L70:
 648               	.LM95:
 649 0392 0E94 0000 		call USART_Rx
 650 0396 8B31      		cpi r24,lo8(27)
 651 0398 89F5      		brne .L79
 652               	.LM96:
 653 039a C2E0      		ldi r28,lo8(2)
 654 039c 87CF      		rjmp .L110
 655               	.L73:
 656               	.LM97:
 657 039e 0E94 0000 		call USART_Rx
 658 03a2 9927      		clr r25
 659 03a4 9093 0000 		sts (SequenceNum)+1,r25
 660 03a8 8093 0000 		sts SequenceNum,r24
 661               	.LM98:
 662 03ac C3E0      		ldi r28,lo8(3)
 663               	.LM99:
 664 03ae 7ECF      		rjmp .L110
 665               	.L74:
 666               	.LM100:
 667 03b0 0E94 0000 		call USART_Rx
 668 03b4 9927      		clr r25
 669 03b6 982F      		mov r25,r24
 670 03b8 8827      		clr r24
 671 03ba 9093 0000 		sts (MessageSize)+1,r25
 672 03be 8093 0000 		sts MessageSize,r24
 673               	.LM101:
 674 03c2 C4E0      		ldi r28,lo8(4)
 675               	.LM102:
 676 03c4 73CF      		rjmp .L110
 677               	.L75:
 678               	.LM103:
 679 03c6 0E94 0000 		call USART_Rx
 680 03ca 282F      		mov r18,r24
 681 03cc 3327      		clr r19
 682 03ce 8091 0000 		lds r24,MessageSize
 683 03d2 9091 0000 		lds r25,(MessageSize)+1
 684 03d6 822B      		or r24,r18
 685 03d8 932B      		or r25,r19
 686 03da 9093 0000 		sts (MessageSize)+1,r25
 687 03de 8093 0000 		sts MessageSize,r24
 688               	.LM104:
 689 03e2 8351      		subi r24,lo8(275)
 690 03e4 9140      		sbci r25,hi8(275)
 691 03e6 50F4      		brsh .L79
 692               	.LM105:
 693 03e8 C5E0      		ldi r28,lo8(5)
 694               	.LM106:
 695 03ea EE24      		clr r14
 696 03ec FF24      		clr r15
 697 03ee 5ECF      		rjmp .L110
 698               	.L78:
 699               	.LM107:
 700 03f0 0E94 0000 		call USART_Rx
 701 03f4 8E30      		cpi r24,lo8(14)
 702 03f6 11F4      		brne .L79
 703               	.LM108:
 704 03f8 C6E0      		ldi r28,lo8(6)
 705 03fa 58CF      		rjmp .L110
 706               	.L79:
 707               	.LM109:
 708 03fc C9E0      		ldi r28,lo8(9)
 709               	.LM110:
 710 03fe 56CF      		rjmp .L110
 711               	.L81:
 712               	.LM111:
 713 0400 8091 0000 		lds r24,MessageSize
 714 0404 9091 0000 		lds r25,(MessageSize)+1
 715 0408 E816      		cp r14,r24
 716 040a F906      		cpc r15,r25
 717 040c 11F4      		brne .L82
 718               	.LM112:
 719 040e C7E0      		ldi r28,lo8(7)
 720 0410 4DCF      		rjmp .L110
 721               	.L82:
 722               	.LM113:
 723 0412 8701      		movw r16,r14
 724 0414 0050      		subi r16,lo8(-(PacketBytes))
 725 0416 1040      		sbci r17,hi8(-(PacketBytes))
 726 0418 0894      		sec
 727 041a E11C      		adc r14,__zero_reg__
 728 041c F11C      		adc r15,__zero_reg__
 729 041e 0E94 0000 		call USART_Rx
 730 0422 F801      		movw r30,r16
 731 0424 8083      		st Z,r24
 732               	.LM114:
 733 0426 42CF      		rjmp .L110
 734               	.L84:
 735               	.LM115:
 736 0428 0E94 0000 		call V2P_GetChecksum
 737 042c 182F      		mov r17,r24
 738 042e 0E94 0000 		call USART_Rx
 739 0432 1817      		cp r17,r24
 740 0434 09F0      		breq .+2
 741 0436 74C0      		rjmp .L85
 742               	.LM116:
 743 0438 8091 0000 		lds r24,PacketBytes
 744 043c 9927      		clr r25
 745 043e 8430      		cpi r24,4
 746 0440 9105      		cpc r25,__zero_reg__
 747 0442 3CF4      		brge .L97
 748 0444 8230      		cpi r24,2
 749 0446 9105      		cpc r25,__zero_reg__
 750 0448 0CF0      		brlt .+2
 751 044a 61C0      		rjmp .L95
 752 044c 0197      		sbiw r24,1
 753 044e 39F0      		breq .L87
 754 0450 61C0      		rjmp .L96
 755               	.L97:
 756 0452 8630      		cpi r24,6
 757 0454 9105      		cpc r25,__zero_reg__
 758 0456 E9F0      		breq .L93
 759 0458 0797      		sbiw r24,7
 760 045a 99F0      		breq .L92
 761 045c 5BC0      		rjmp .L96
 762               	.L87:
 763               	.LM117:
 764 045e 8BE0      		ldi r24,lo8(11)
 765 0460 90E0      		ldi r25,hi8(11)
 766 0462 9093 0000 		sts (MessageSize)+1,r25
 767 0466 8093 0000 		sts MessageSize,r24
 768 046a A0E0      		ldi r26,lo8(PacketBytes)
 769 046c B0E0      		ldi r27,hi8(PacketBytes)
 770 046e E0E0      		ldi r30,lo8(SignonResponse)
 771 0470 F0E0      		ldi r31,hi8(SignonResponse)
 772 0472 9AE0      		ldi r25,lo8(10)
 773               	.L91:
 774               	.LBB14:
 775               	.LBB15:
 776               	.LM118:
 777               	/* #APP */
 778 0474 8491      		lpm r24, Z
 779               		
 780               	/* #NOAPP */
 781               	.LBE15:
 782 0476 8D93      		st X+,r24
 783               	.LM119:
 784 0478 9150      		subi r25,lo8(-(-1))
 785 047a 3196      		adiw r30,1
 786 047c 97FF      		sbrs r25,7
 787 047e FACF      		rjmp .L91
 788 0480 58C0      		rjmp .L108
 789               	.L92:
 790               	.LBE14:
 791               	.LM120:
 792 0482 82E0      		ldi r24,lo8(2)
 793 0484 90E0      		ldi r25,hi8(2)
 794 0486 9093 0000 		sts (MessageSize)+1,r25
 795 048a 8093 0000 		sts MessageSize,r24
 796               	.LM121:
 797 048e 80EC      		ldi r24,lo8(-64)
 798 0490 4EC0      		rjmp .L109
 799               	.L93:
 800               	.LM122:
 801 0492 82E0      		ldi r24,lo8(2)
 802 0494 90E0      		ldi r25,hi8(2)
 803 0496 9093 0000 		sts (MessageSize)+1,r25
 804 049a 8093 0000 		sts MessageSize,r24
 805               	.LM123:
 806 049e 0E94 0000 		call V2P_CheckForExtendedAddress
 807               	.LM124:
 808 04a2 8091 0000 		lds r24,PacketBytes+1
 809 04a6 9927      		clr r25
 810 04a8 AA27      		clr r26
 811 04aa BB27      		clr r27
 812 04ac B82F      		mov r27,r24
 813 04ae AA27      		clr r26
 814 04b0 9927      		clr r25
 815 04b2 8827      		clr r24
 816 04b4 2091 0000 		lds r18,PacketBytes+2
 817 04b8 3327      		clr r19
 818 04ba 4427      		clr r20
 819 04bc 5527      		clr r21
 820 04be A901      		movw r20,r18
 821 04c0 3327      		clr r19
 822 04c2 2227      		clr r18
 823 04c4 822B      		or r24,r18
 824 04c6 932B      		or r25,r19
 825 04c8 A42B      		or r26,r20
 826 04ca B52B      		or r27,r21
 827 04cc 2091 0000 		lds r18,PacketBytes+3
 828 04d0 3327      		clr r19
 829 04d2 4427      		clr r20
 830 04d4 5527      		clr r21
 831 04d6 542F      		mov r21,r20
 832 04d8 432F      		mov r20,r19
 833 04da 322F      		mov r19,r18
 834 04dc 2227      		clr r18
 835 04de 822B      		or r24,r18
 836 04e0 932B      		or r25,r19
 837 04e2 A42B      		or r26,r20
 838 04e4 B52B      		or r27,r21
 839 04e6 2091 0000 		lds r18,PacketBytes+4
 840 04ea 3327      		clr r19
 841 04ec 4427      		clr r20
 842 04ee 5527      		clr r21
 843 04f0 822B      		or r24,r18
 844 04f2 932B      		or r25,r19
 845 04f4 A42B      		or r26,r20
 846 04f6 B52B      		or r27,r21
 847 04f8 8093 0000 		sts CurrAddress,r24
 848 04fc 9093 0000 		sts (CurrAddress)+1,r25
 849 0500 A093 0000 		sts (CurrAddress)+2,r26
 850 0504 B093 0000 		sts (CurrAddress)+3,r27
 851               	.LM125:
 852 0508 1092 0000 		sts PacketBytes+1,__zero_reg__
 853 050c 12C0      		rjmp .L108
 854               	.L95:
 855               	.LM126:
 856 050e 0E94 0000 		call V2P_GetSetParamater
 857               	.LM127:
 858 0512 11C0      		rjmp .L107
 859               	.L96:
 860               	.LM128:
 861 0514 E091 0000 		lds r30,InterpretPacketRoutine
 862 0518 F091 0000 		lds r31,(InterpretPacketRoutine)+1
 863 051c 0995      		icall
 864 051e 0BC0      		rjmp .L107
 865               	.L85:
 866               	.LM129:
 867 0520 82E0      		ldi r24,lo8(2)
 868 0522 90E0      		ldi r25,hi8(2)
 869 0524 9093 0000 		sts (MessageSize)+1,r25
 870 0528 8093 0000 		sts MessageSize,r24
 871               	.LM130:
 872 052c 81EC      		ldi r24,lo8(-63)
 873               	.L109:
 874 052e 8093 0000 		sts PacketBytes+1,r24
 875               	.L108:
 876               	.LM131:
 877 0532 0E94 0000 		call V2P_SendPacket
 878               	.L107:
 879               	.LM132:
 880 0536 C8E0      		ldi r28,lo8(8)
 881 0538 B9CE      		rjmp .L110
 882               	.L52:
 883               	/* epilogue: frame size=0 */
 884 053a CF91      		pop r28
 885 053c 1F91      		pop r17
 886 053e 0F91      		pop r16
 887 0540 FF90      		pop r15
 888 0542 EF90      		pop r14
 889 0544 0895      		ret
 890               	/* epilogue end (size=6) */
 891               	/* function V2P_RunStateMachine size 363 (352) */
 892               	.LFE14:
 894               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 V2Protocol.c
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:23     .bss:00000000 Param_ControllerInit
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:29     .bss:00000001 CurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:35     .bss:00000005 InProgrammingMode
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:41     .bss:00000006 MessageSize
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:47     .bss:00000008 SequenceNum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:53     .bss:0000000a PacketBytes
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:59     .data:00000000 InterpretPacketRoutine
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:65     .progmem.data:00000000 SignonResponse
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:80     .text:00000000 V2P_GetChecksum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:134    .text:00000042 V2P_SendPacket
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:205    .text:000000c2 V2P_GetSetParamater
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:433    .text:0000020a V2P_IncrementCurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:458    .text:00000232 V2P_CheckForExtendedAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccesaaaa.s:502    .text:00000284 V2P_RunStateMachine

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
AICI_InterpretPacket
USART_Tx
EEPROMVars
__eeprom_read_byte_1F2021
__eeprom_write_byte_1F2021
USI_SPISetSpeed
MAIN_ResetCSLine
USI_SPITransmit
BUFF_InitialiseBuffer
TimeOut
Ticks
BuffElements
USART_Rx
