   1               		.file	"V2Protocol.c"
   2               		.arch atmega169
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	Param_ControllerInit
  19               	.global	Param_ControllerInit
  20               		.section .bss
  23               	Param_ControllerInit:
  24 0000 00        		.skip 1,0
  25               	.global	CurrAddress
  26               	.global	CurrAddress
  29               	CurrAddress:
  30 0001 0000 0000 		.skip 4,0
  31               	.global	InProgrammingMode
  32               	.global	InProgrammingMode
  35               	InProgrammingMode:
  36 0005 00        		.skip 1,0
  37               	.global	MessageSize
  38               	.global	MessageSize
  41               	MessageSize:
  42 0006 0000      		.skip 2,0
  43               	.global	SequenceNum
  44               	.global	SequenceNum
  47               	SequenceNum:
  48 0008 0000      		.skip 2,0
  49               	.global	PacketBytes
  50               	.global	PacketBytes
  53               	PacketBytes:
  54 000a 0000 0000 		.skip 275,0
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  55               	.global	InterpretPacketRoutine
  56               		.data
  59               	InterpretPacketRoutine:
  60 0000 0000      		.word	pm(AICI_InterpretPacket)
  61               	.global	SignonResponse
  62               		.section	.progmem.data,"a",@progbits
  65               	SignonResponse:
  66 0000 01        		.byte	1
  67 0001 00        		.byte	0
  68 0002 08        		.byte	8
  69 0003 41        		.byte	65
  70 0004 56        		.byte	86
  71 0005 52        		.byte	82
  72 0006 49        		.byte	73
  73 0007 53        		.byte	83
  74 0008 50        		.byte	80
  75 0009 5F        		.byte	95
  76 000a 32        		.byte	50
  77               	.global	VersionData
  80               	VersionData:
  81 000b 02        		.byte	2
  82 000c 02        		.byte	2
  83 000d 04        		.byte	4
  84               		.text
  85               	.global	V2P_GetChecksum
  87               	V2P_GetChecksum:
  88               	.LFB16:
  89               	.LM1:
  90               	/* prologue: frame size=0 */
  91               	/* prologue end (size=0) */
  92               	.LM2:
  93 0000 6BE1      		ldi r22,lo8(27)
  94               	.LM3:
  95 0002 8091 0000 		lds r24,SequenceNum
  96 0006 6827      		eor r22,r24
  97               	.LM4:
  98 0008 2091 0000 		lds r18,MessageSize
  99 000c 3091 0000 		lds r19,(MessageSize)+1
 100 0010 832F      		mov r24,r19
 101 0012 9927      		clr r25
 102 0014 6827      		eor r22,r24
 103               	.LM5:
 104 0016 8091 0000 		lds r24,MessageSize
 105 001a 6827      		eor r22,r24
 106               	.LM6:
 107 001c 8EE0      		ldi r24,lo8(14)
 108 001e 6827      		eor r22,r24
 109               	.LBB2:
 110               	.LM7:
 111 0020 40E0      		ldi r20,lo8(0)
 112 0022 50E0      		ldi r21,hi8(0)
 113 0024 4217      		cp r20,r18
 114 0026 5307      		cpc r21,r19
 115 0028 48F4      		brsh .L7
 116 002a E0E0      		ldi r30,lo8(PacketBytes)
 117 002c F0E0      		ldi r31,hi8(PacketBytes)
 118               	.L5:
 119               	.LM8:
 120 002e 8191      		ld r24,Z+
 121 0030 6827      		eor r22,r24
 122               	.LM9:
 123 0032 4F5F      		subi r20,lo8(-(1))
 124 0034 5F4F      		sbci r21,hi8(-(1))
 125 0036 4217      		cp r20,r18
 126 0038 5307      		cpc r21,r19
 127 003a C8F3      		brlo .L5
 128               	.L7:
 129               	.LBE2:
 130               	.LM10:
 131 003c 862F      		mov r24,r22
 132 003e 9927      		clr r25
 133               	/* epilogue: frame size=0 */
 134 0040 0895      		ret
 135               	/* epilogue end (size=1) */
 136               	/* function V2P_GetChecksum size 33 (32) */
 137               	.LFE16:
 139               	.global	V2P_SendPacket
 141               	V2P_SendPacket:
 142               	.LFB15:
 143               	.LM11:
 144               	/* prologue: frame size=0 */
 145 0042 0F93      		push r16
 146 0044 1F93      		push r17
 147 0046 CF93      		push r28
 148 0048 DF93      		push r29
 149               	/* prologue end (size=4) */
 150               	.LM12:
 151 004a 8BE1      		ldi r24,lo8(27)
 152 004c 0E94 0000 		call USART_Tx
 153               	.LM13:
 154 0050 8091 0000 		lds r24,SequenceNum
 155 0054 0E94 0000 		call USART_Tx
 156               	.LM14:
 157 0058 8091 0000 		lds r24,MessageSize+1
 158 005c 0E94 0000 		call USART_Tx
 159               	.LM15:
 160 0060 8091 0000 		lds r24,MessageSize
 161 0064 0E94 0000 		call USART_Tx
 162               	.LM16:
 163 0068 8EE0      		ldi r24,lo8(14)
 164 006a 0E94 0000 		call USART_Tx
 165               	.LBB3:
 166               	.LM17:
 167 006e C0E0      		ldi r28,lo8(0)
 168 0070 D0E0      		ldi r29,hi8(0)
 169 0072 8091 0000 		lds r24,MessageSize
 170 0076 9091 0000 		lds r25,(MessageSize)+1
 171 007a C817      		cp r28,r24
 172 007c D907      		cpc r29,r25
 173 007e 78F4      		brsh .L14
 174 0080 00E0      		ldi r16,lo8(PacketBytes)
 175 0082 10E0      		ldi r17,hi8(PacketBytes)
 176               	.L12:
 177               	.LM18:
 178 0084 F801      		movw r30,r16
 179 0086 8191      		ld r24,Z+
 180 0088 8F01      		movw r16,r30
 181 008a 0E94 0000 		call USART_Tx
 182               	.LM19:
 183 008e 2196      		adiw r28,1
 184 0090 8091 0000 		lds r24,MessageSize
 185 0094 9091 0000 		lds r25,(MessageSize)+1
 186 0098 C817      		cp r28,r24
 187 009a D907      		cpc r29,r25
 188 009c 98F3      		brlo .L12
 189               	.L14:
 190               	.LBE3:
 191               	.LM20:
 192 009e 0E94 0000 		call V2P_GetChecksum
 193 00a2 0E94 0000 		call USART_Tx
 194               	.LM21:
 195 00a6 8091 0000 		lds r24,SequenceNum
 196 00aa 9091 0000 		lds r25,(SequenceNum)+1
 197 00ae 0196      		adiw r24,1
 198 00b0 9093 0000 		sts (SequenceNum)+1,r25
 199 00b4 8093 0000 		sts SequenceNum,r24
 200               	/* epilogue: frame size=0 */
 201 00b8 DF91      		pop r29
 202 00ba CF91      		pop r28
 203 00bc 1F91      		pop r17
 204 00be 0F91      		pop r16
 205 00c0 0895      		ret
 206               	/* epilogue end (size=5) */
 207               	/* function V2P_SendPacket size 64 (55) */
 208               	.LFE15:
 210               	.global	V2P_GetSetParamater
 212               	V2P_GetSetParamater:
 213               	.LFB17:
 214               	.LM22:
 215               	/* prologue: frame size=0 */
 216               	/* prologue end (size=0) */
 217               	.LM23:
 218 00c2 2091 0000 		lds r18,PacketBytes+1
 219               	.LM24:
 220 00c6 83E0      		ldi r24,lo8(3)
 221 00c8 90E0      		ldi r25,hi8(3)
 222 00ca 9093 0000 		sts (MessageSize)+1,r25
 223 00ce 8093 0000 		sts MessageSize,r24
 224               	.LM25:
 225 00d2 1092 0000 		sts PacketBytes+1,__zero_reg__
 226               	.LM26:
 227 00d6 E22F      		mov r30,r18
 228 00d8 FF27      		clr r31
 229 00da E839      		cpi r30,152
 230 00dc F105      		cpc r31,__zero_reg__
 231 00de ACF4      		brge .L40
 232               	.LM27:
 233 00e0 E639      		cpi r30,150
 234 00e2 F105      		cpc r31,__zero_reg__
 235 00e4 0CF0      		brlt .+2
 236 00e6 6BC0      		rjmp .L36
 237 00e8 E138      		cpi r30,129
 238 00ea F105      		cpc r31,__zero_reg__
 239 00ec F9F0      		breq .L18
 240 00ee E238      		cpi r30,130
 241 00f0 F105      		cpc r31,__zero_reg__
 242 00f2 24F4      		brge .L41
 243 00f4 E038      		cpi r30,128
 244 00f6 F105      		cpc r31,__zero_reg__
 245 00f8 B9F0      		breq .L17
 246 00fa 6FC0      		rjmp .L39
 247               	.L41:
 248 00fc CF01      		movw r24,r30
 249 00fe 8059      		subi r24,lo8(-(-144))
 250 0100 9040      		sbci r25,hi8(-(-144))
 251 0102 0397      		sbiw r24,3
 252 0104 08F0      		brlo .+2
 253 0106 69C0      		rjmp .L39
 254 0108 13C0      		rjmp .L21
 255               	.L40:
 256 010a EE39      		cpi r30,158
 257 010c F105      		cpc r31,__zero_reg__
 258 010e 09F4      		brne .+2
 259 0110 3BC0      		rjmp .L30
 260 0112 EF39      		cpi r30,159
 261 0114 F105      		cpc r31,__zero_reg__
 262 0116 24F4      		brge .L42
 263 0118 E839      		cpi r30,152
 264 011a F105      		cpc r31,__zero_reg__
 265 011c F9F0      		breq .L25
 266 011e 5DC0      		rjmp .L39
 267               	.L42:
 268 0120 EF39      		cpi r30,159
 269 0122 F105      		cpc r31,__zero_reg__
 270 0124 49F0      		breq .L22
 271 0126 59C0      		rjmp .L39
 272               	.L17:
 273               	.LM28:
 274 0128 83E0      		ldi r24,lo8(3)
 275 012a 37C0      		rjmp .L44
 276               	.L18:
 277               	.LM29:
 278 012c 81E0      		ldi r24,lo8(1)
 279 012e 35C0      		rjmp .L44
 280               	.L21:
 281               	.LBB4:
 282               	.LM30:
 283 0130 E050      		subi r30,lo8(-(VersionData-144))
 284 0132 F040      		sbci r31,hi8(-(VersionData-144))
 285               	/* #APP */
 286 0134 8491      		lpm r24, Z
 287               		
 288               	/* #NOAPP */
 289 0136 31C0      		rjmp .L44
 290               	.L22:
 291               	.LBE4:
 292               	.LM31:
 293 0138 8091 0000 		lds r24,PacketBytes
 294 013c 8330      		cpi r24,lo8(3)
 295 013e 19F4      		brne .L23
 296               	.LM32:
 297 0140 8091 0000 		lds r24,Param_ControllerInit
 298 0144 2AC0      		rjmp .L44
 299               	.L23:
 300               	.LM33:
 301 0146 82E0      		ldi r24,lo8(2)
 302 0148 90E0      		ldi r25,hi8(2)
 303 014a 9093 0000 		sts (MessageSize)+1,r25
 304 014e 8093 0000 		sts MessageSize,r24
 305               	.LM34:
 306 0152 8091 0000 		lds r24,PacketBytes+2
 307 0156 8093 0000 		sts Param_ControllerInit,r24
 308               	.LM35:
 309 015a 48C0      		rjmp .L16
 310               	.L25:
 311               	.LM36:
 312 015c 8091 0000 		lds r24,PacketBytes
 313 0160 A0E0      		ldi r26,lo8(EEPROMVars+1)
 314 0162 B0E0      		ldi r27,hi8(EEPROMVars+1)
 315 0164 8330      		cpi r24,lo8(3)
 316 0166 B1F0      		breq .L43
 317               	.LM37:
 318 0168 82E0      		ldi r24,lo8(2)
 319 016a 90E0      		ldi r25,hi8(2)
 320 016c 9093 0000 		sts (MessageSize)+1,r25
 321 0170 8093 0000 		sts MessageSize,r24
 322               	.LBB5:
 323               	.LM38:
 324 0174 8091 0000 		lds r24,PacketBytes+2
 325               	.LBB6:
 326               	.LM39:
 327               	/* #APP */
 328 0178 082E      		mov __tmp_reg__,r24
 329 017a 0E94 0000 		call __eeprom_write_byte_1F2021
 330               	/* #NOAPP */
 331               	.LBE6:
 332               	.LBE5:
 333               	.LM40:
 334 017e 8091 0000 		lds r24,PacketBytes+2
 335 0182 0E94 0000 		call USI_SPISetSpeed
 336               	.LM41:
 337 0186 32C0      		rjmp .L16
 338               	.L30:
 339               	.LM42:
 340 0188 8091 0000 		lds r24,PacketBytes
 341 018c A0E0      		ldi r26,lo8(EEPROMVars)
 342 018e B0E0      		ldi r27,hi8(EEPROMVars)
 343 0190 8330      		cpi r24,lo8(3)
 344 0192 31F4      		brne .L31
 345               	.L43:
 346               	.LBB7:
 347               	.LBB8:
 348               	.LM43:
 349               	/* #APP */
 350 0194 0E94 0000 		call __eeprom_read_byte_1F2021
 351 0198 802D      		mov r24,__tmp_reg__
 352               	/* #NOAPP */
 353               	.L44:
 354               	.LBE8:
 355               	.LBE7:
 356               	.LM44:
 357 019a 8093 0000 		sts PacketBytes+2,r24
 358 019e 26C0      		rjmp .L16
 359               	.L31:
 360               	.LM45:
 361 01a0 82E0      		ldi r24,lo8(2)
 362 01a2 90E0      		ldi r25,hi8(2)
 363 01a4 9093 0000 		sts (MessageSize)+1,r25
 364 01a8 8093 0000 		sts MessageSize,r24
 365               	.LBB9:
 366               	.LM46:
 367 01ac 8091 0000 		lds r24,PacketBytes+2
 368               	.LBB10:
 369               	.LM47:
 370               	/* #APP */
 371 01b0 082E      		mov __tmp_reg__,r24
 372 01b2 0E94 0000 		call __eeprom_write_byte_1F2021
 373               	/* #NOAPP */
 374               	.LBE10:
 375               	.LBE9:
 376               	.LM48:
 377 01b6 81E0      		ldi r24,lo8(1)
 378 01b8 0E94 0000 		call MAIN_ResetCSLine
 379               	.LM49:
 380 01bc 17C0      		rjmp .L16
 381               	.L36:
 382               	.LM50:
 383 01be 8091 0000 		lds r24,PacketBytes
 384 01c2 8330      		cpi r24,lo8(3)
 385 01c4 19F4      		brne .L37
 386               	.LM51:
 387 01c6 1092 0000 		sts PacketBytes+2,__zero_reg__
 388 01ca 10C0      		rjmp .L16
 389               	.L37:
 390               	.LM52:
 391 01cc 82E0      		ldi r24,lo8(2)
 392 01ce 90E0      		ldi r25,hi8(2)
 393 01d0 9093 0000 		sts (MessageSize)+1,r25
 394 01d4 8093 0000 		sts MessageSize,r24
 395               	.LM53:
 396 01d8 09C0      		rjmp .L16
 397               	.L39:
 398               	.LM54:
 399 01da 82E0      		ldi r24,lo8(2)
 400 01dc 90E0      		ldi r25,hi8(2)
 401 01de 9093 0000 		sts (MessageSize)+1,r25
 402 01e2 8093 0000 		sts MessageSize,r24
 403               	.LM55:
 404 01e6 80EC      		ldi r24,lo8(-64)
 405 01e8 8093 0000 		sts PacketBytes+1,r24
 406               	.L16:
 407               	.LM56:
 408 01ec 0E94 0000 		call V2P_SendPacket
 409               	/* epilogue: frame size=0 */
 410 01f0 0895      		ret
 411               	/* epilogue end (size=1) */
 412               	/* function V2P_GetSetParamater size 158 (157) */
 413               	.LFE17:
 415               	.global	V2P_IncrementCurrAddress
 417               	V2P_IncrementCurrAddress:
 418               	.LFB18:
 419               	.LM57:
 420               	/* prologue: frame size=0 */
 421               	/* prologue end (size=0) */
 422               	.LM58:
 423 01f2 8091 0000 		lds r24,CurrAddress
 424 01f6 9091 0000 		lds r25,(CurrAddress)+1
 425 01fa A091 0000 		lds r26,(CurrAddress)+2
 426 01fe B091 0000 		lds r27,(CurrAddress)+3
 427 0202 0196      		adiw r24,1
 428 0204 A11D      		adc r26,__zero_reg__
 429 0206 B11D      		adc r27,__zero_reg__
 430 0208 8093 0000 		sts CurrAddress,r24
 431 020c 9093 0000 		sts (CurrAddress)+1,r25
 432 0210 A093 0000 		sts (CurrAddress)+2,r26
 433 0214 B093 0000 		sts (CurrAddress)+3,r27
 434               	/* epilogue: frame size=0 */
 435 0218 0895      		ret
 436               	/* epilogue end (size=1) */
 437               	/* function V2P_IncrementCurrAddress size 20 (19) */
 438               	.LFE18:
 440               	.global	V2P_CheckForExtendedAddress
 442               	V2P_CheckForExtendedAddress:
 443               	.LFB19:
 444               	.LM59:
 445               	/* prologue: frame size=0 */
 446               	/* prologue end (size=0) */
 447               	.LM60:
 448 021a 8091 0000 		lds r24,CurrAddress
 449 021e 9091 0000 		lds r25,(CurrAddress)+1
 450 0222 A091 0000 		lds r26,(CurrAddress)+2
 451 0226 B091 0000 		lds r27,(CurrAddress)+3
 452 022a B7FF      		sbrs r27,7
 453 022c 1EC0      		rjmp .L46
 454               	.LM61:
 455 022e 8DE4      		ldi r24,lo8(77)
 456 0230 0E94 0000 		call USI_SPITransmit
 457               	.LM62:
 458 0234 80E0      		ldi r24,lo8(0)
 459 0236 0E94 0000 		call USI_SPITransmit
 460               	.LM63:
 461 023a 8091 0000 		lds r24,CurrAddress+2
 462 023e 0E94 0000 		call USI_SPITransmit
 463               	.LM64:
 464 0242 80E0      		ldi r24,lo8(0)
 465 0244 0E94 0000 		call USI_SPITransmit
 466               	.LM65:
 467 0248 8091 0000 		lds r24,CurrAddress
 468 024c 9091 0000 		lds r25,(CurrAddress)+1
 469 0250 A091 0000 		lds r26,(CurrAddress)+2
 470 0254 B091 0000 		lds r27,(CurrAddress)+3
 471 0258 BF77      		andi r27,hhi8(2147483647)
 472 025a 8093 0000 		sts CurrAddress,r24
 473 025e 9093 0000 		sts (CurrAddress)+1,r25
 474 0262 A093 0000 		sts (CurrAddress)+2,r26
 475 0266 B093 0000 		sts (CurrAddress)+3,r27
 476               	.L46:
 477 026a 0895      		ret
 478               	/* epilogue: frame size=0 */
 479               	/* epilogue: noreturn */
 480               	/* epilogue end (size=0) */
 481               	/* function V2P_CheckForExtendedAddress size 41 (41) */
 482               	.LFE19:
 484               	.global	V2P_RunStateMachine
 486               	V2P_RunStateMachine:
 487               	.LFB14:
 488               	.LM66:
 489               	/* prologue: frame size=0 */
 490 026c EF92      		push r14
 491 026e FF92      		push r15
 492 0270 0F93      		push r16
 493 0272 1F93      		push r17
 494 0274 CF93      		push r28
 495               	/* prologue end (size=5) */
 496               	.LM67:
 497 0276 C0E0      		ldi r28,lo8(0)
 498               	.LM68:
 499 0278 EE24      		clr r14
 500 027a FF24      		clr r15
 501               	.LM69:
 502 027c 8091 C100 		lds r24,193
 503 0280 8078      		andi r24,lo8(-128)
 504 0282 8861      		ori r24,lo8(24)
 505 0284 8093 C100 		sts 193,r24
 506 0288 80E0      		ldi r24,lo8(WaitText)
 507 028a 90E0      		ldi r25,hi8(WaitText)
 508 028c 0E94 0000 		call LCD_puts_f
 509 0290 0E94 0000 		call OSCCAL_Calibrate
 510               	.LM70:
 511 0294 0E94 0000 		call BUFF_InitialiseBuffer
 512               	.LM71:
 513 0298 0E94 0000 		call TIMEOUT_SetupTimeoutTimer
 514               	.LM72:
 515 029c C093 0000 		sts InProgrammingMode,r28
 516               	.LM73:
 517 02a0 1092 0000 		sts CurrAddress,__zero_reg__
 518 02a4 1092 0000 		sts (CurrAddress)+1,__zero_reg__
 519 02a8 1092 0000 		sts (CurrAddress)+2,__zero_reg__
 520 02ac 1092 0000 		sts (CurrAddress)+3,__zero_reg__
 521               	.L110:
 522               	.LM74:
 523 02b0 8091 0000 		lds r24,TimeOut
 524 02b4 8130      		cpi r24,lo8(1)
 525 02b6 11F4      		brne .L55
 526               	.LM75:
 527 02b8 C9E0      		ldi r28,lo8(9)
 528 02ba 05C0      		rjmp .L56
 529               	.L55:
 530               	.LM76:
 531 02bc CC23      		tst r28
 532 02be 19F0      		breq .L56
 533               	.LM77:
 534 02c0 83E0      		ldi r24,lo8(3)
 535 02c2 8093 8100 		sts 129,r24
 536               	.L56:
 537               	.LM78:
 538 02c6 8C2F      		mov r24,r28
 539 02c8 9927      		clr r25
 540 02ca 8430      		cpi r24,4
 541 02cc 9105      		cpc r25,__zero_reg__
 542 02ce 09F4      		brne .+2
 543 02d0 73C0      		rjmp .L75
 544 02d2 8530      		cpi r24,5
 545 02d4 9105      		cpc r25,__zero_reg__
 546 02d6 94F4      		brge .L99
 547 02d8 8130      		cpi r24,1
 548 02da 9105      		cpc r25,__zero_reg__
 549 02dc 09F4      		brne .+2
 550 02de 52C0      		rjmp .L70
 551 02e0 8230      		cpi r24,2
 552 02e2 9105      		cpc r25,__zero_reg__
 553 02e4 1CF4      		brge .L100
 554 02e6 892B      		or r24,r25
 555 02e8 B1F1      		breq .L63
 556 02ea E2CF      		rjmp .L110
 557               	.L100:
 558 02ec 8230      		cpi r24,2
 559 02ee 9105      		cpc r25,__zero_reg__
 560 02f0 09F4      		brne .+2
 561 02f2 4EC0      		rjmp .L73
 562 02f4 0397      		sbiw r24,3
 563 02f6 09F4      		brne .+2
 564 02f8 54C0      		rjmp .L74
 565 02fa DACF      		rjmp .L110
 566               	.L99:
 567 02fc 8730      		cpi r24,7
 568 02fe 9105      		cpc r25,__zero_reg__
 569 0300 09F4      		brne .+2
 570 0302 8BC0      		rjmp .L84
 571 0304 8830      		cpi r24,8
 572 0306 9105      		cpc r25,__zero_reg__
 573 0308 44F4      		brge .L101
 574 030a 8530      		cpi r24,5
 575 030c 9105      		cpc r25,__zero_reg__
 576 030e 09F4      		brne .+2
 577 0310 68C0      		rjmp .L78
 578 0312 0697      		sbiw r24,6
 579 0314 09F4      		brne .+2
 580 0316 6DC0      		rjmp .L81
 581 0318 CBCF      		rjmp .L110
 582               	.L101:
 583 031a 8830      		cpi r24,8
 584 031c 9105      		cpc r25,__zero_reg__
 585 031e 79F0      		breq .L61
 586 0320 0997      		sbiw r24,9
 587 0322 31F6      		brne .L110
 588               	.LM79:
 589 0324 82E0      		ldi r24,lo8(2)
 590 0326 90E0      		ldi r25,hi8(2)
 591 0328 9093 0000 		sts (MessageSize)+1,r25
 592 032c 8093 0000 		sts MessageSize,r24
 593               	.LM80:
 594 0330 80EC      		ldi r24,lo8(-64)
 595 0332 8093 0000 		sts PacketBytes+1,r24
 596               	.LM81:
 597 0336 1092 0000 		sts TimeOut,__zero_reg__
 598               	.LM82:
 599 033a 0E94 0000 		call V2P_SendPacket
 600               	.L61:
 601               	.LM83:
 602 033e 0E94 0000 		call BUFF_InitialiseBuffer
 603               	.LM84:
 604 0342 1092 8100 		sts 129,__zero_reg__
 605 0346 1092 0000 		sts Ticks,__zero_reg__
 606 034a 1092 8500 		sts (132)+1,__zero_reg__
 607 034e 1092 8400 		sts 132,__zero_reg__
 608               	.LM85:
 609 0352 C0E0      		ldi r28,lo8(0)
 610               	.LM86:
 611 0354 ADCF      		rjmp .L110
 612               	.L63:
 613               	.LM87:
 614 0356 8091 0000 		lds r24,BuffElements
 615 035a 8111      		cpse r24,__zero_reg__
 616               	.LM88:
 617 035c C1E0      		ldi r28,lo8(1)
 618               	.L64:
 619               	.LM89:
 620 035e F29B      		sbis 62-0x20,2
 621 0360 A7CF      		rjmp .L110
 622 0362 8091 0000 		lds r24,InProgrammingMode
 623 0366 8823      		tst r24
 624 0368 09F0      		breq .+2
 625 036a A2CF      		rjmp .L110
 626               	.LM90:
 627 036c 8091 C100 		lds r24,193
 628 0370 8078      		andi r24,lo8(-128)
 629 0372 8093 C100 		sts 193,r24
 630 0376 80E8      		ldi r24,lo8(-128)
 631 0378 8093 6100 		sts 97,r24
 632 037c 83E0      		ldi r24,lo8(3)
 633 037e 8093 6100 		sts 97,r24
 634               	.LM91:
 635 0382 D4C0      		rjmp .L48
 636               	.L70:
 637               	.LM92:
 638 0384 0E94 0000 		call USART_Rx
 639 0388 8B31      		cpi r24,lo8(27)
 640 038a 89F5      		brne .L79
 641               	.LM93:
 642 038c C2E0      		ldi r28,lo8(2)
 643 038e 90CF      		rjmp .L110
 644               	.L73:
 645               	.LM94:
 646 0390 0E94 0000 		call USART_Rx
 647 0394 9927      		clr r25
 648 0396 9093 0000 		sts (SequenceNum)+1,r25
 649 039a 8093 0000 		sts SequenceNum,r24
 650               	.LM95:
 651 039e C3E0      		ldi r28,lo8(3)
 652               	.LM96:
 653 03a0 87CF      		rjmp .L110
 654               	.L74:
 655               	.LM97:
 656 03a2 0E94 0000 		call USART_Rx
 657 03a6 9927      		clr r25
 658 03a8 982F      		mov r25,r24
 659 03aa 8827      		clr r24
 660 03ac 9093 0000 		sts (MessageSize)+1,r25
 661 03b0 8093 0000 		sts MessageSize,r24
 662               	.LM98:
 663 03b4 C4E0      		ldi r28,lo8(4)
 664               	.LM99:
 665 03b6 7CCF      		rjmp .L110
 666               	.L75:
 667               	.LM100:
 668 03b8 0E94 0000 		call USART_Rx
 669 03bc 282F      		mov r18,r24
 670 03be 3327      		clr r19
 671 03c0 8091 0000 		lds r24,MessageSize
 672 03c4 9091 0000 		lds r25,(MessageSize)+1
 673 03c8 822B      		or r24,r18
 674 03ca 932B      		or r25,r19
 675 03cc 9093 0000 		sts (MessageSize)+1,r25
 676 03d0 8093 0000 		sts MessageSize,r24
 677               	.LM101:
 678 03d4 8351      		subi r24,lo8(275)
 679 03d6 9140      		sbci r25,hi8(275)
 680 03d8 50F4      		brsh .L79
 681               	.LM102:
 682 03da C5E0      		ldi r28,lo8(5)
 683               	.LM103:
 684 03dc EE24      		clr r14
 685 03de FF24      		clr r15
 686 03e0 67CF      		rjmp .L110
 687               	.L78:
 688               	.LM104:
 689 03e2 0E94 0000 		call USART_Rx
 690 03e6 8E30      		cpi r24,lo8(14)
 691 03e8 11F4      		brne .L79
 692               	.LM105:
 693 03ea C6E0      		ldi r28,lo8(6)
 694 03ec 61CF      		rjmp .L110
 695               	.L79:
 696               	.LM106:
 697 03ee C9E0      		ldi r28,lo8(9)
 698               	.LM107:
 699 03f0 5FCF      		rjmp .L110
 700               	.L81:
 701               	.LM108:
 702 03f2 8091 0000 		lds r24,MessageSize
 703 03f6 9091 0000 		lds r25,(MessageSize)+1
 704 03fa E816      		cp r14,r24
 705 03fc F906      		cpc r15,r25
 706 03fe 11F4      		brne .L82
 707               	.LM109:
 708 0400 C7E0      		ldi r28,lo8(7)
 709 0402 56CF      		rjmp .L110
 710               	.L82:
 711               	.LM110:
 712 0404 8701      		movw r16,r14
 713 0406 0050      		subi r16,lo8(-(PacketBytes))
 714 0408 1040      		sbci r17,hi8(-(PacketBytes))
 715 040a 0894      		sec
 716 040c E11C      		adc r14,__zero_reg__
 717 040e F11C      		adc r15,__zero_reg__
 718 0410 0E94 0000 		call USART_Rx
 719 0414 F801      		movw r30,r16
 720 0416 8083      		st Z,r24
 721               	.LM111:
 722 0418 4BCF      		rjmp .L110
 723               	.L84:
 724               	.LM112:
 725 041a 0E94 0000 		call V2P_GetChecksum
 726 041e 182F      		mov r17,r24
 727 0420 0E94 0000 		call USART_Rx
 728 0424 1817      		cp r17,r24
 729 0426 09F0      		breq .+2
 730 0428 74C0      		rjmp .L85
 731               	.LM113:
 732 042a 8091 0000 		lds r24,PacketBytes
 733 042e 9927      		clr r25
 734 0430 8430      		cpi r24,4
 735 0432 9105      		cpc r25,__zero_reg__
 736 0434 3CF4      		brge .L97
 737 0436 8230      		cpi r24,2
 738 0438 9105      		cpc r25,__zero_reg__
 739 043a 0CF0      		brlt .+2
 740 043c 61C0      		rjmp .L95
 741 043e 0197      		sbiw r24,1
 742 0440 39F0      		breq .L87
 743 0442 61C0      		rjmp .L96
 744               	.L97:
 745 0444 8630      		cpi r24,6
 746 0446 9105      		cpc r25,__zero_reg__
 747 0448 E9F0      		breq .L93
 748 044a 0797      		sbiw r24,7
 749 044c 99F0      		breq .L92
 750 044e 5BC0      		rjmp .L96
 751               	.L87:
 752               	.LM114:
 753 0450 8BE0      		ldi r24,lo8(11)
 754 0452 90E0      		ldi r25,hi8(11)
 755 0454 9093 0000 		sts (MessageSize)+1,r25
 756 0458 8093 0000 		sts MessageSize,r24
 757 045c A0E0      		ldi r26,lo8(PacketBytes)
 758 045e B0E0      		ldi r27,hi8(PacketBytes)
 759 0460 E0E0      		ldi r30,lo8(SignonResponse)
 760 0462 F0E0      		ldi r31,hi8(SignonResponse)
 761 0464 9AE0      		ldi r25,lo8(10)
 762               	.L91:
 763               	.LBB11:
 764               	.LBB12:
 765               	.LM115:
 766               	/* #APP */
 767 0466 8491      		lpm r24, Z
 768               		
 769               	/* #NOAPP */
 770               	.LBE12:
 771 0468 8D93      		st X+,r24
 772               	.LM116:
 773 046a 9150      		subi r25,lo8(-(-1))
 774 046c 3196      		adiw r30,1
 775 046e 97FF      		sbrs r25,7
 776 0470 FACF      		rjmp .L91
 777 0472 58C0      		rjmp .L108
 778               	.L92:
 779               	.LBE11:
 780               	.LM117:
 781 0474 82E0      		ldi r24,lo8(2)
 782 0476 90E0      		ldi r25,hi8(2)
 783 0478 9093 0000 		sts (MessageSize)+1,r25
 784 047c 8093 0000 		sts MessageSize,r24
 785               	.LM118:
 786 0480 80EC      		ldi r24,lo8(-64)
 787 0482 4EC0      		rjmp .L109
 788               	.L93:
 789               	.LM119:
 790 0484 82E0      		ldi r24,lo8(2)
 791 0486 90E0      		ldi r25,hi8(2)
 792 0488 9093 0000 		sts (MessageSize)+1,r25
 793 048c 8093 0000 		sts MessageSize,r24
 794               	.LM120:
 795 0490 0E94 0000 		call V2P_CheckForExtendedAddress
 796               	.LM121:
 797 0494 8091 0000 		lds r24,PacketBytes+1
 798 0498 9927      		clr r25
 799 049a AA27      		clr r26
 800 049c BB27      		clr r27
 801 049e B82F      		mov r27,r24
 802 04a0 AA27      		clr r26
 803 04a2 9927      		clr r25
 804 04a4 8827      		clr r24
 805 04a6 2091 0000 		lds r18,PacketBytes+2
 806 04aa 3327      		clr r19
 807 04ac 4427      		clr r20
 808 04ae 5527      		clr r21
 809 04b0 A901      		movw r20,r18
 810 04b2 3327      		clr r19
 811 04b4 2227      		clr r18
 812 04b6 822B      		or r24,r18
 813 04b8 932B      		or r25,r19
 814 04ba A42B      		or r26,r20
 815 04bc B52B      		or r27,r21
 816 04be 2091 0000 		lds r18,PacketBytes+3
 817 04c2 3327      		clr r19
 818 04c4 4427      		clr r20
 819 04c6 5527      		clr r21
 820 04c8 542F      		mov r21,r20
 821 04ca 432F      		mov r20,r19
 822 04cc 322F      		mov r19,r18
 823 04ce 2227      		clr r18
 824 04d0 822B      		or r24,r18
 825 04d2 932B      		or r25,r19
 826 04d4 A42B      		or r26,r20
 827 04d6 B52B      		or r27,r21
 828 04d8 2091 0000 		lds r18,PacketBytes+4
 829 04dc 3327      		clr r19
 830 04de 4427      		clr r20
 831 04e0 5527      		clr r21
 832 04e2 822B      		or r24,r18
 833 04e4 932B      		or r25,r19
 834 04e6 A42B      		or r26,r20
 835 04e8 B52B      		or r27,r21
 836 04ea 8093 0000 		sts CurrAddress,r24
 837 04ee 9093 0000 		sts (CurrAddress)+1,r25
 838 04f2 A093 0000 		sts (CurrAddress)+2,r26
 839 04f6 B093 0000 		sts (CurrAddress)+3,r27
 840               	.LM122:
 841 04fa 1092 0000 		sts PacketBytes+1,__zero_reg__
 842 04fe 12C0      		rjmp .L108
 843               	.L95:
 844               	.LM123:
 845 0500 0E94 0000 		call V2P_GetSetParamater
 846               	.LM124:
 847 0504 11C0      		rjmp .L107
 848               	.L96:
 849               	.LM125:
 850 0506 E091 0000 		lds r30,InterpretPacketRoutine
 851 050a F091 0000 		lds r31,(InterpretPacketRoutine)+1
 852 050e 0995      		icall
 853 0510 0BC0      		rjmp .L107
 854               	.L85:
 855               	.LM126:
 856 0512 82E0      		ldi r24,lo8(2)
 857 0514 90E0      		ldi r25,hi8(2)
 858 0516 9093 0000 		sts (MessageSize)+1,r25
 859 051a 8093 0000 		sts MessageSize,r24
 860               	.LM127:
 861 051e 81EC      		ldi r24,lo8(-63)
 862               	.L109:
 863 0520 8093 0000 		sts PacketBytes+1,r24
 864               	.L108:
 865               	.LM128:
 866 0524 0E94 0000 		call V2P_SendPacket
 867               	.L107:
 868               	.LM129:
 869 0528 C8E0      		ldi r28,lo8(8)
 870 052a C2CE      		rjmp .L110
 871               	.L48:
 872               	/* epilogue: frame size=0 */
 873 052c CF91      		pop r28
 874 052e 1F91      		pop r17
 875 0530 0F91      		pop r16
 876 0532 FF90      		pop r15
 877 0534 EF90      		pop r14
 878 0536 0895      		ret
 879               	/* epilogue end (size=6) */
 880               	/* function V2P_RunStateMachine size 368 (357) */
 881               	.LFE14:
 883               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 V2Protocol.c
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:23     .bss:00000000 Param_ControllerInit
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:29     .bss:00000001 CurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:35     .bss:00000005 InProgrammingMode
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:41     .bss:00000006 MessageSize
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:47     .bss:00000008 SequenceNum
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:53     .bss:0000000a PacketBytes
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:59     .data:00000000 InterpretPacketRoutine
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:65     .progmem.data:00000000 SignonResponse
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:80     .progmem.data:0000000b VersionData
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:87     .text:00000000 V2P_GetChecksum
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:141    .text:00000042 V2P_SendPacket
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:212    .text:000000c2 V2P_GetSetParamater
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:417    .text:000001f2 V2P_IncrementCurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:442    .text:0000021a V2P_CheckForExtendedAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/cc00aaaa.s:486    .text:0000026c V2P_RunStateMachine

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
AICI_InterpretPacket
USART_Tx
EEPROMVars
__eeprom_write_byte_1F2021
USI_SPISetSpeed
__eeprom_read_byte_1F2021
MAIN_ResetCSLine
USI_SPITransmit
WaitText
LCD_puts_f
OSCCAL_Calibrate
BUFF_InitialiseBuffer
TIMEOUT_SetupTimeoutTimer
TimeOut
Ticks
BuffElements
USART_Rx
