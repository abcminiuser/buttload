   1               		.file	"V2Protocol.c"
   2               		.arch atmega169
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	Param_ControllerInit
  19               	.global	Param_ControllerInit
  20               		.section .bss
  23               	Param_ControllerInit:
  24 0000 00        		.skip 1,0
  25               	.global	CurrAddress
  26               	.global	CurrAddress
  29               	CurrAddress:
  30 0001 0000 0000 		.skip 4,0
  31               	.global	InProgrammingMode
  32               	.global	InProgrammingMode
  35               	InProgrammingMode:
  36 0005 00        		.skip 1,0
  37               	.global	MessageSize
  38               	.global	MessageSize
  41               	MessageSize:
  42 0006 0000      		.skip 2,0
  43               	.global	SequenceNum
  44               	.global	SequenceNum
  47               	SequenceNum:
  48 0008 0000      		.skip 2,0
  49               	.global	PacketBytes
  50               	.global	PacketBytes
  53               	PacketBytes:
  54 000a 0000 0000 		.skip 275,0
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  55               	.global	InterpretPacketRoutine
  56               		.data
  59               	InterpretPacketRoutine:
  60 0000 0000      		.word	pm(AICI_InterpretPacket)
  61               	.global	ButtLoadData
  62               		.section	.progmem.data,"a",@progbits
  65               	ButtLoadData:
  66 0000 40        		.byte	64
  67 0001 28        		.byte	40
  68 0002 23        		.byte	35
  69 0003 29        		.byte	41
  70 0004 53        		.byte	83
  71 0005 43        		.byte	67
  72 0006 52        		.byte	82
  73 0007 45        		.byte	69
  74 0008 57        		.byte	87
  75 0009 20        		.byte	32
  76 000a 52        		.byte	82
  77 000b 45        		.byte	69
  78 000c 54        		.byte	84
  79 000d 52        		.byte	82
  80 000e 4F        		.byte	79
  81 000f 44        		.byte	68
  82 0010 41        		.byte	65
  83 0011 4E        		.byte	78
  84 0012 00        		.byte	0
  85               	.global	SignonResponse
  88               	SignonResponse:
  89 0013 01        		.byte	1
  90 0014 00        		.byte	0
  91 0015 08        		.byte	8
  92 0016 41        		.byte	65
  93 0017 56        		.byte	86
  94 0018 52        		.byte	82
  95 0019 49        		.byte	73
  96 001a 53        		.byte	83
  97 001b 50        		.byte	80
  98 001c 5F        		.byte	95
  99 001d 32        		.byte	50
 100               		.text
 101               	.global	V2P_GetChecksum
 103               	V2P_GetChecksum:
 104               	.LFB16:
 105               	.LM1:
 106               	/* prologue: frame size=0 */
 107               	/* prologue end (size=0) */
 108               	.LM2:
 109 0000 6BE1      		ldi r22,lo8(27)
 110               	.LM3:
 111 0002 8091 0000 		lds r24,SequenceNum
 112 0006 6827      		eor r22,r24
 113               	.LM4:
 114 0008 2091 0000 		lds r18,MessageSize
 115 000c 3091 0000 		lds r19,(MessageSize)+1
 116 0010 832F      		mov r24,r19
 117 0012 9927      		clr r25
 118 0014 6827      		eor r22,r24
 119               	.LM5:
 120 0016 8091 0000 		lds r24,MessageSize
 121 001a 6827      		eor r22,r24
 122               	.LM6:
 123 001c 8EE0      		ldi r24,lo8(14)
 124 001e 6827      		eor r22,r24
 125               	.LBB2:
 126               	.LM7:
 127 0020 40E0      		ldi r20,lo8(0)
 128 0022 50E0      		ldi r21,hi8(0)
 129 0024 4217      		cp r20,r18
 130 0026 5307      		cpc r21,r19
 131 0028 48F4      		brsh .L7
 132 002a E0E0      		ldi r30,lo8(PacketBytes)
 133 002c F0E0      		ldi r31,hi8(PacketBytes)
 134               	.L5:
 135               	.LM8:
 136 002e 8191      		ld r24,Z+
 137 0030 6827      		eor r22,r24
 138               	.LM9:
 139 0032 4F5F      		subi r20,lo8(-(1))
 140 0034 5F4F      		sbci r21,hi8(-(1))
 141 0036 4217      		cp r20,r18
 142 0038 5307      		cpc r21,r19
 143 003a C8F3      		brlo .L5
 144               	.L7:
 145               	.LBE2:
 146               	.LM10:
 147 003c 862F      		mov r24,r22
 148 003e 9927      		clr r25
 149               	/* epilogue: frame size=0 */
 150 0040 0895      		ret
 151               	/* epilogue end (size=1) */
 152               	/* function V2P_GetChecksum size 33 (32) */
 153               	.LFE16:
 155               	.global	V2P_SendPacket
 157               	V2P_SendPacket:
 158               	.LFB15:
 159               	.LM11:
 160               	/* prologue: frame size=0 */
 161 0042 0F93      		push r16
 162 0044 1F93      		push r17
 163 0046 CF93      		push r28
 164 0048 DF93      		push r29
 165               	/* prologue end (size=4) */
 166               	.LM12:
 167 004a 8BE1      		ldi r24,lo8(27)
 168 004c 0E94 0000 		call USART_Tx
 169               	.LM13:
 170 0050 8091 0000 		lds r24,SequenceNum
 171 0054 0E94 0000 		call USART_Tx
 172               	.LM14:
 173 0058 8091 0000 		lds r24,MessageSize+1
 174 005c 0E94 0000 		call USART_Tx
 175               	.LM15:
 176 0060 8091 0000 		lds r24,MessageSize
 177 0064 0E94 0000 		call USART_Tx
 178               	.LM16:
 179 0068 8EE0      		ldi r24,lo8(14)
 180 006a 0E94 0000 		call USART_Tx
 181               	.LBB3:
 182               	.LM17:
 183 006e C0E0      		ldi r28,lo8(0)
 184 0070 D0E0      		ldi r29,hi8(0)
 185 0072 8091 0000 		lds r24,MessageSize
 186 0076 9091 0000 		lds r25,(MessageSize)+1
 187 007a C817      		cp r28,r24
 188 007c D907      		cpc r29,r25
 189 007e 78F4      		brsh .L14
 190 0080 00E0      		ldi r16,lo8(PacketBytes)
 191 0082 10E0      		ldi r17,hi8(PacketBytes)
 192               	.L12:
 193               	.LM18:
 194 0084 F801      		movw r30,r16
 195 0086 8191      		ld r24,Z+
 196 0088 8F01      		movw r16,r30
 197 008a 0E94 0000 		call USART_Tx
 198               	.LM19:
 199 008e 2196      		adiw r28,1
 200 0090 8091 0000 		lds r24,MessageSize
 201 0094 9091 0000 		lds r25,(MessageSize)+1
 202 0098 C817      		cp r28,r24
 203 009a D907      		cpc r29,r25
 204 009c 98F3      		brlo .L12
 205               	.L14:
 206               	.LBE3:
 207               	.LM20:
 208 009e 0E94 0000 		call V2P_GetChecksum
 209 00a2 0E94 0000 		call USART_Tx
 210               	.LM21:
 211 00a6 8091 0000 		lds r24,SequenceNum
 212 00aa 9091 0000 		lds r25,(SequenceNum)+1
 213 00ae 0196      		adiw r24,1
 214 00b0 9093 0000 		sts (SequenceNum)+1,r25
 215 00b4 8093 0000 		sts SequenceNum,r24
 216               	/* epilogue: frame size=0 */
 217 00b8 DF91      		pop r29
 218 00ba CF91      		pop r28
 219 00bc 1F91      		pop r17
 220 00be 0F91      		pop r16
 221 00c0 0895      		ret
 222               	/* epilogue end (size=5) */
 223               	/* function V2P_SendPacket size 64 (55) */
 224               	.LFE15:
 226               	.global	V2P_GetSetParamater
 228               	V2P_GetSetParamater:
 229               	.LFB17:
 230               	.LM22:
 231               	/* prologue: frame size=0 */
 232               	/* prologue end (size=0) */
 233               	.LM23:
 234 00c2 2091 0000 		lds r18,PacketBytes+1
 235               	.LM24:
 236 00c6 83E0      		ldi r24,lo8(3)
 237 00c8 90E0      		ldi r25,hi8(3)
 238 00ca 9093 0000 		sts (MessageSize)+1,r25
 239 00ce 8093 0000 		sts MessageSize,r24
 240               	.LM25:
 241 00d2 1092 0000 		sts PacketBytes+1,__zero_reg__
 242               	.LM26:
 243 00d6 3327      		clr r19
 244 00d8 2239      		cpi r18,146
 245 00da 3105      		cpc r19,__zero_reg__
 246 00dc 51F1      		breq .L21
 247               	.LM27:
 248 00de 2339      		cpi r18,147
 249 00e0 3105      		cpc r19,__zero_reg__
 250 00e2 8CF4      		brge .L44
 251 00e4 2138      		cpi r18,129
 252 00e6 3105      		cpc r19,__zero_reg__
 253 00e8 01F1      		breq .L18
 254 00ea 2238      		cpi r18,130
 255 00ec 3105      		cpc r19,__zero_reg__
 256 00ee 24F4      		brge .L45
 257 00f0 2038      		cpi r18,128
 258 00f2 3105      		cpc r19,__zero_reg__
 259 00f4 41F1      		breq .L22
 260 00f6 7AC0      		rjmp .L43
 261               	.L45:
 262 00f8 2039      		cpi r18,144
 263 00fa 3105      		cpc r19,__zero_reg__
 264 00fc C1F0      		breq .L20
 265 00fe 2139      		cpi r18,145
 266 0100 3105      		cpc r19,__zero_reg__
 267 0102 A9F0      		breq .L20
 268 0104 73C0      		rjmp .L43
 269               	.L44:
 270 0106 2839      		cpi r18,152
 271 0108 3105      		cpc r19,__zero_reg__
 272 010a 89F1      		breq .L29
 273 010c 2939      		cpi r18,153
 274 010e 3105      		cpc r19,__zero_reg__
 275 0110 2CF4      		brge .L46
 276 0112 2639      		cpi r18,150
 277 0114 3105      		cpc r19,__zero_reg__
 278 0116 0CF4      		brge .+2
 279 0118 69C0      		rjmp .L43
 280 011a 5AC0      		rjmp .L40
 281               	.L46:
 282 011c 2E39      		cpi r18,158
 283 011e 3105      		cpc r19,__zero_reg__
 284 0120 E1F1      		breq .L34
 285 0122 2F39      		cpi r18,159
 286 0124 3105      		cpc r19,__zero_reg__
 287 0126 89F0      		breq .L26
 288 0128 61C0      		rjmp .L43
 289               	.L18:
 290               	.LM28:
 291 012a 81E0      		ldi r24,lo8(1)
 292 012c 3FC0      		rjmp .L48
 293               	.L20:
 294               	.LM29:
 295 012e 82E0      		ldi r24,lo8(2)
 296 0130 3DC0      		rjmp .L48
 297               	.L21:
 298               	.LBB4:
 299               	.LM30:
 300 0132 A0E0      		ldi r26,lo8(EEPROMVars+134)
 301 0134 B0E0      		ldi r27,hi8(EEPROMVars+134)
 302 0136 9D01      		movw r18,r26
 303               	.LBB5:
 304               	.LM31:
 305               	/* #APP */
 306 0138 0E94 0000 		call __eeprom_read_byte_1F2021
 307 013c 802D      		mov r24,__tmp_reg__
 308               	/* #NOAPP */
 309               	.LBE5:
 310               	.LBE4:
 311               	.LM32:
 312 013e 8F3F      		cpi r24,lo8(-1)
 313 0140 11F0      		breq .L22
 314               	.LBB6:
 315               	.LBB7:
 316               	.LM33:
 317 0142 D901      		movw r26,r18
 318 0144 30C0      		rjmp .L47
 319               	.L22:
 320               	.LBE7:
 321               	.LBE6:
 322               	.LM34:
 323 0146 84E0      		ldi r24,lo8(4)
 324 0148 31C0      		rjmp .L48
 325               	.L26:
 326               	.LM35:
 327 014a 8091 0000 		lds r24,PacketBytes
 328 014e 8330      		cpi r24,lo8(3)
 329 0150 19F4      		brne .L27
 330               	.LM36:
 331 0152 8091 0000 		lds r24,Param_ControllerInit
 332 0156 2AC0      		rjmp .L48
 333               	.L27:
 334               	.LM37:
 335 0158 82E0      		ldi r24,lo8(2)
 336 015a 90E0      		ldi r25,hi8(2)
 337 015c 9093 0000 		sts (MessageSize)+1,r25
 338 0160 8093 0000 		sts MessageSize,r24
 339               	.LM38:
 340 0164 8091 0000 		lds r24,PacketBytes+2
 341 0168 8093 0000 		sts Param_ControllerInit,r24
 342               	.LM39:
 343 016c 48C0      		rjmp .L16
 344               	.L29:
 345               	.LM40:
 346 016e 8091 0000 		lds r24,PacketBytes
 347 0172 A0E0      		ldi r26,lo8(EEPROMVars+1)
 348 0174 B0E0      		ldi r27,hi8(EEPROMVars+1)
 349 0176 8330      		cpi r24,lo8(3)
 350 0178 B1F0      		breq .L47
 351               	.LM41:
 352 017a 82E0      		ldi r24,lo8(2)
 353 017c 90E0      		ldi r25,hi8(2)
 354 017e 9093 0000 		sts (MessageSize)+1,r25
 355 0182 8093 0000 		sts MessageSize,r24
 356               	.LBB8:
 357               	.LM42:
 358 0186 8091 0000 		lds r24,PacketBytes+2
 359               	.LBB9:
 360               	.LM43:
 361               	/* #APP */
 362 018a 082E      		mov __tmp_reg__,r24
 363 018c 0E94 0000 		call __eeprom_write_byte_1F2021
 364               	/* #NOAPP */
 365               	.LBE9:
 366               	.LBE8:
 367               	.LM44:
 368 0190 8091 0000 		lds r24,PacketBytes+2
 369 0194 0E94 0000 		call USI_SPISetSpeed
 370               	.LM45:
 371 0198 32C0      		rjmp .L16
 372               	.L34:
 373               	.LM46:
 374 019a 8091 0000 		lds r24,PacketBytes
 375 019e A0E0      		ldi r26,lo8(EEPROMVars)
 376 01a0 B0E0      		ldi r27,hi8(EEPROMVars)
 377 01a2 8330      		cpi r24,lo8(3)
 378 01a4 31F4      		brne .L35
 379               	.L47:
 380               	.LBB10:
 381               	.LBB11:
 382               	.LM47:
 383               	/* #APP */
 384 01a6 0E94 0000 		call __eeprom_read_byte_1F2021
 385 01aa 802D      		mov r24,__tmp_reg__
 386               	/* #NOAPP */
 387               	.L48:
 388               	.LBE11:
 389               	.LBE10:
 390               	.LM48:
 391 01ac 8093 0000 		sts PacketBytes+2,r24
 392 01b0 26C0      		rjmp .L16
 393               	.L35:
 394               	.LM49:
 395 01b2 82E0      		ldi r24,lo8(2)
 396 01b4 90E0      		ldi r25,hi8(2)
 397 01b6 9093 0000 		sts (MessageSize)+1,r25
 398 01ba 8093 0000 		sts MessageSize,r24
 399               	.LBB12:
 400               	.LM50:
 401 01be 8091 0000 		lds r24,PacketBytes+2
 402               	.LBB13:
 403               	.LM51:
 404               	/* #APP */
 405 01c2 082E      		mov __tmp_reg__,r24
 406 01c4 0E94 0000 		call __eeprom_write_byte_1F2021
 407               	/* #NOAPP */
 408               	.LBE13:
 409               	.LBE12:
 410               	.LM52:
 411 01c8 81E0      		ldi r24,lo8(1)
 412 01ca 0E94 0000 		call MAIN_ResetCSLine
 413               	.LM53:
 414 01ce 17C0      		rjmp .L16
 415               	.L40:
 416               	.LM54:
 417 01d0 8091 0000 		lds r24,PacketBytes
 418 01d4 8330      		cpi r24,lo8(3)
 419 01d6 19F4      		brne .L41
 420               	.LM55:
 421 01d8 1092 0000 		sts PacketBytes+2,__zero_reg__
 422 01dc 10C0      		rjmp .L16
 423               	.L41:
 424               	.LM56:
 425 01de 82E0      		ldi r24,lo8(2)
 426 01e0 90E0      		ldi r25,hi8(2)
 427 01e2 9093 0000 		sts (MessageSize)+1,r25
 428 01e6 8093 0000 		sts MessageSize,r24
 429               	.LM57:
 430 01ea 09C0      		rjmp .L16
 431               	.L43:
 432               	.LM58:
 433 01ec 82E0      		ldi r24,lo8(2)
 434 01ee 90E0      		ldi r25,hi8(2)
 435 01f0 9093 0000 		sts (MessageSize)+1,r25
 436 01f4 8093 0000 		sts MessageSize,r24
 437               	.LM59:
 438 01f8 80EC      		ldi r24,lo8(-64)
 439 01fa 8093 0000 		sts PacketBytes+1,r24
 440               	.L16:
 441               	.LM60:
 442 01fe 0E94 0000 		call V2P_SendPacket
 443               	/* epilogue: frame size=0 */
 444 0202 0895      		ret
 445               	/* epilogue end (size=1) */
 446               	/* function V2P_GetSetParamater size 165 (164) */
 447               	.LFE17:
 449               	.global	V2P_IncrementCurrAddress
 451               	V2P_IncrementCurrAddress:
 452               	.LFB18:
 453               	.LM61:
 454               	/* prologue: frame size=0 */
 455               	/* prologue end (size=0) */
 456               	.LM62:
 457 0204 8091 0000 		lds r24,CurrAddress
 458 0208 9091 0000 		lds r25,(CurrAddress)+1
 459 020c A091 0000 		lds r26,(CurrAddress)+2
 460 0210 B091 0000 		lds r27,(CurrAddress)+3
 461 0214 0196      		adiw r24,1
 462 0216 A11D      		adc r26,__zero_reg__
 463 0218 B11D      		adc r27,__zero_reg__
 464 021a 8093 0000 		sts CurrAddress,r24
 465 021e 9093 0000 		sts (CurrAddress)+1,r25
 466 0222 A093 0000 		sts (CurrAddress)+2,r26
 467 0226 B093 0000 		sts (CurrAddress)+3,r27
 468               	/* epilogue: frame size=0 */
 469 022a 0895      		ret
 470               	/* epilogue end (size=1) */
 471               	/* function V2P_IncrementCurrAddress size 20 (19) */
 472               	.LFE18:
 474               	.global	V2P_CheckForExtendedAddress
 476               	V2P_CheckForExtendedAddress:
 477               	.LFB19:
 478               	.LM63:
 479               	/* prologue: frame size=0 */
 480               	/* prologue end (size=0) */
 481               	.LM64:
 482 022c 8091 0000 		lds r24,CurrAddress
 483 0230 9091 0000 		lds r25,(CurrAddress)+1
 484 0234 A091 0000 		lds r26,(CurrAddress)+2
 485 0238 B091 0000 		lds r27,(CurrAddress)+3
 486 023c B7FF      		sbrs r27,7
 487 023e 1EC0      		rjmp .L50
 488               	.LM65:
 489 0240 8DE4      		ldi r24,lo8(77)
 490 0242 0E94 0000 		call USI_SPITransmit
 491               	.LM66:
 492 0246 80E0      		ldi r24,lo8(0)
 493 0248 0E94 0000 		call USI_SPITransmit
 494               	.LM67:
 495 024c 8091 0000 		lds r24,CurrAddress+2
 496 0250 0E94 0000 		call USI_SPITransmit
 497               	.LM68:
 498 0254 80E0      		ldi r24,lo8(0)
 499 0256 0E94 0000 		call USI_SPITransmit
 500               	.LM69:
 501 025a 8091 0000 		lds r24,CurrAddress
 502 025e 9091 0000 		lds r25,(CurrAddress)+1
 503 0262 A091 0000 		lds r26,(CurrAddress)+2
 504 0266 B091 0000 		lds r27,(CurrAddress)+3
 505 026a BF77      		andi r27,hhi8(2147483647)
 506 026c 8093 0000 		sts CurrAddress,r24
 507 0270 9093 0000 		sts (CurrAddress)+1,r25
 508 0274 A093 0000 		sts (CurrAddress)+2,r26
 509 0278 B093 0000 		sts (CurrAddress)+3,r27
 510               	.L50:
 511 027c 0895      		ret
 512               	/* epilogue: frame size=0 */
 513               	/* epilogue: noreturn */
 514               	/* epilogue end (size=0) */
 515               	/* function V2P_CheckForExtendedAddress size 41 (41) */
 516               	.LFE19:
 518               	.global	V2P_RunStateMachine
 520               	V2P_RunStateMachine:
 521               	.LFB14:
 522               	.LM70:
 523               	/* prologue: frame size=0 */
 524 027e EF92      		push r14
 525 0280 FF92      		push r15
 526 0282 0F93      		push r16
 527 0284 1F93      		push r17
 528 0286 CF93      		push r28
 529               	/* prologue end (size=5) */
 530               	.LM71:
 531 0288 C0E0      		ldi r28,lo8(0)
 532               	.LM72:
 533 028a EE24      		clr r14
 534 028c FF24      		clr r15
 535               	.LM73:
 536 028e 0E94 0000 		call BUFF_InitialiseBuffer
 537               	.LM74:
 538 0292 C093 8100 		sts 129,r28
 539               	.LM75:
 540 0296 C093 0000 		sts InProgrammingMode,r28
 541               	.LM76:
 542 029a 1092 0000 		sts CurrAddress,__zero_reg__
 543 029e 1092 0000 		sts (CurrAddress)+1,__zero_reg__
 544 02a2 1092 0000 		sts (CurrAddress)+2,__zero_reg__
 545 02a6 1092 0000 		sts (CurrAddress)+3,__zero_reg__
 546               	.L112:
 547               	.LM77:
 548 02aa 8091 0000 		lds r24,PacketTimeOut
 549 02ae 8130      		cpi r24,lo8(1)
 550 02b0 11F4      		brne .L56
 551               	.LM78:
 552 02b2 CAE0      		ldi r28,lo8(10)
 553 02b4 11C0      		rjmp .L57
 554               	.L56:
 555               	.LM79:
 556 02b6 CC23      		tst r28
 557 02b8 79F0      		breq .L57
 558               	.LM80:
 559 02ba 1092 0000 		sts PacketTimeOut,__zero_reg__
 560 02be 1092 0000 		sts PacketTimeOutTicks,__zero_reg__
 561 02c2 1092 B200 		sts 178,__zero_reg__
 562 02c6 80EF      		ldi r24,lo8(-16)
 563 02c8 8093 B300 		sts 179,r24
 564 02cc 82E0      		ldi r24,lo8(2)
 565 02ce 8093 7000 		sts 112,r24
 566 02d2 8FE0      		ldi r24,lo8(15)
 567 02d4 8093 B000 		sts 176,r24
 568               	.L57:
 569               	.LM81:
 570 02d8 8C2F      		mov r24,r28
 571 02da 9927      		clr r25
 572 02dc 8530      		cpi r24,5
 573 02de 9105      		cpc r25,__zero_reg__
 574 02e0 09F4      		brne .+2
 575 02e2 87C0      		rjmp .L80
 576 02e4 8630      		cpi r24,6
 577 02e6 9105      		cpc r25,__zero_reg__
 578 02e8 ACF4      		brge .L101
 579 02ea 8230      		cpi r24,2
 580 02ec 9105      		cpc r25,__zero_reg__
 581 02ee 09F4      		brne .+2
 582 02f0 57C0      		rjmp .L75
 583 02f2 8330      		cpi r24,3
 584 02f4 9105      		cpc r25,__zero_reg__
 585 02f6 34F4      		brge .L102
 586 02f8 0097      		sbiw r24,0
 587 02fa 99F1      		breq .L65
 588 02fc 0197      		sbiw r24,1
 589 02fe 09F4      		brne .+2
 590 0300 49C0      		rjmp .L72
 591 0302 D3CF      		rjmp .L112
 592               	.L102:
 593 0304 8330      		cpi r24,3
 594 0306 9105      		cpc r25,__zero_reg__
 595 0308 09F4      		brne .+2
 596 030a 53C0      		rjmp .L76
 597 030c 0497      		sbiw r24,4
 598 030e 09F4      		brne .+2
 599 0310 5BC0      		rjmp .L77
 600 0312 CBCF      		rjmp .L112
 601               	.L101:
 602 0314 8830      		cpi r24,8
 603 0316 9105      		cpc r25,__zero_reg__
 604 0318 D1F0      		breq .L63
 605 031a 8930      		cpi r24,9
 606 031c 9105      		cpc r25,__zero_reg__
 607 031e 44F4      		brge .L103
 608 0320 8630      		cpi r24,6
 609 0322 9105      		cpc r25,__zero_reg__
 610 0324 09F4      		brne .+2
 611 0326 6DC0      		rjmp .L83
 612 0328 0797      		sbiw r24,7
 613 032a 09F4      		brne .+2
 614 032c 7EC0      		rjmp .L86
 615 032e BDCF      		rjmp .L112
 616               	.L103:
 617 0330 8930      		cpi r24,9
 618 0332 9105      		cpc r25,__zero_reg__
 619 0334 09F4      		brne .+2
 620 0336 ABC0      		rjmp .L94
 621 0338 0A97      		sbiw r24,10
 622 033a 09F0      		breq .+2
 623 033c B6CF      		rjmp .L112
 624               	.LM82:
 625 033e 82E0      		ldi r24,lo8(2)
 626 0340 90E0      		ldi r25,hi8(2)
 627 0342 9093 0000 		sts (MessageSize)+1,r25
 628 0346 8093 0000 		sts MessageSize,r24
 629               	.LM83:
 630 034a 80E8      		ldi r24,lo8(-128)
 631 034c F6C0      		rjmp .L111
 632               	.L63:
 633               	.LM84:
 634 034e 1092 0000 		sts PacketTimeOut,__zero_reg__
 635               	.LM85:
 636 0352 0E94 0000 		call BUFF_InitialiseBuffer
 637               	.LM86:
 638 0356 1092 B000 		sts 176,__zero_reg__
 639 035a 1092 7000 		sts 112,__zero_reg__
 640               	.LM87:
 641 035e C0E0      		ldi r28,lo8(0)
 642               	.LM88:
 643 0360 A4CF      		rjmp .L112
 644               	.L65:
 645               	.LM89:
 646 0362 8091 0000 		lds r24,BuffElements
 647 0366 8111      		cpse r24,__zero_reg__
 648               	.LM90:
 649 0368 C1E0      		ldi r28,lo8(1)
 650               	.L66:
 651               	.LM91:
 652 036a F29B      		sbis 62-0x20,2
 653 036c 9ECF      		rjmp .L112
 654 036e 8091 0000 		lds r24,InProgrammingMode
 655 0372 8823      		tst r24
 656 0374 09F0      		breq .+2
 657 0376 99CF      		rjmp .L112
 658               	.LM92:
 659 0378 80E8      		ldi r24,lo8(-128)
 660 037a 8093 6100 		sts 97,r24
 661 037e 83E0      		ldi r24,lo8(3)
 662 0380 8093 6100 		sts 97,r24
 663 0384 8091 C100 		lds r24,193
 664 0388 8078      		andi r24,lo8(-128)
 665 038a 8093 C100 		sts 193,r24
 666               	.LM93:
 667 038e 0E94 0000 		call TOUT_SetupSleepTimer
 668               	.LM94:
 669 0392 D9C0      		rjmp .L52
 670               	.L72:
 671               	.LM95:
 672 0394 0E94 0000 		call USART_Rx
 673 0398 8B31      		cpi r24,lo8(27)
 674 039a 89F5      		brne .L81
 675               	.LM96:
 676 039c C2E0      		ldi r28,lo8(2)
 677 039e 85CF      		rjmp .L112
 678               	.L75:
 679               	.LM97:
 680 03a0 0E94 0000 		call USART_Rx
 681 03a4 9927      		clr r25
 682 03a6 9093 0000 		sts (SequenceNum)+1,r25
 683 03aa 8093 0000 		sts SequenceNum,r24
 684               	.LM98:
 685 03ae C3E0      		ldi r28,lo8(3)
 686               	.LM99:
 687 03b0 7CCF      		rjmp .L112
 688               	.L76:
 689               	.LM100:
 690 03b2 0E94 0000 		call USART_Rx
 691 03b6 9927      		clr r25
 692 03b8 982F      		mov r25,r24
 693 03ba 8827      		clr r24
 694 03bc 9093 0000 		sts (MessageSize)+1,r25
 695 03c0 8093 0000 		sts MessageSize,r24
 696               	.LM101:
 697 03c4 C4E0      		ldi r28,lo8(4)
 698               	.LM102:
 699 03c6 71CF      		rjmp .L112
 700               	.L77:
 701               	.LM103:
 702 03c8 0E94 0000 		call USART_Rx
 703 03cc 282F      		mov r18,r24
 704 03ce 3327      		clr r19
 705 03d0 8091 0000 		lds r24,MessageSize
 706 03d4 9091 0000 		lds r25,(MessageSize)+1
 707 03d8 822B      		or r24,r18
 708 03da 932B      		or r25,r19
 709 03dc 9093 0000 		sts (MessageSize)+1,r25
 710 03e0 8093 0000 		sts MessageSize,r24
 711               	.LM104:
 712 03e4 8351      		subi r24,lo8(275)
 713 03e6 9140      		sbci r25,hi8(275)
 714 03e8 50F4      		brsh .L81
 715               	.LM105:
 716 03ea C5E0      		ldi r28,lo8(5)
 717               	.LM106:
 718 03ec EE24      		clr r14
 719 03ee FF24      		clr r15
 720 03f0 5CCF      		rjmp .L112
 721               	.L80:
 722               	.LM107:
 723 03f2 0E94 0000 		call USART_Rx
 724 03f6 8E30      		cpi r24,lo8(14)
 725 03f8 11F4      		brne .L81
 726               	.LM108:
 727 03fa C6E0      		ldi r28,lo8(6)
 728 03fc 56CF      		rjmp .L112
 729               	.L81:
 730               	.LM109:
 731 03fe C9E0      		ldi r28,lo8(9)
 732               	.LM110:
 733 0400 54CF      		rjmp .L112
 734               	.L83:
 735               	.LM111:
 736 0402 8091 0000 		lds r24,MessageSize
 737 0406 9091 0000 		lds r25,(MessageSize)+1
 738 040a E816      		cp r14,r24
 739 040c F906      		cpc r15,r25
 740 040e 11F4      		brne .L84
 741               	.LM112:
 742 0410 C7E0      		ldi r28,lo8(7)
 743 0412 4BCF      		rjmp .L112
 744               	.L84:
 745               	.LM113:
 746 0414 8701      		movw r16,r14
 747 0416 0050      		subi r16,lo8(-(PacketBytes))
 748 0418 1040      		sbci r17,hi8(-(PacketBytes))
 749 041a 0894      		sec
 750 041c E11C      		adc r14,__zero_reg__
 751 041e F11C      		adc r15,__zero_reg__
 752 0420 0E94 0000 		call USART_Rx
 753 0424 F801      		movw r30,r16
 754 0426 8083      		st Z,r24
 755               	.LM114:
 756 0428 40CF      		rjmp .L112
 757               	.L86:
 758               	.LM115:
 759 042a 0E94 0000 		call V2P_GetChecksum
 760 042e 182F      		mov r17,r24
 761 0430 0E94 0000 		call USART_Rx
 762 0434 1817      		cp r17,r24
 763 0436 09F0      		breq .+2
 764 0438 79C0      		rjmp .L87
 765 043a C091 0000 		lds r28,PacketTimeOut
 766 043e CC23      		tst r28
 767 0440 09F0      		breq .+2
 768 0442 74C0      		rjmp .L87
 769               	.LM116:
 770 0444 8091 0000 		lds r24,PacketBytes
 771 0448 9927      		clr r25
 772 044a 8430      		cpi r24,4
 773 044c 9105      		cpc r25,__zero_reg__
 774 044e 3CF4      		brge .L99
 775 0450 8230      		cpi r24,2
 776 0452 9105      		cpc r25,__zero_reg__
 777 0454 0CF0      		brlt .+2
 778 0456 61C0      		rjmp .L97
 779 0458 0197      		sbiw r24,1
 780 045a 39F0      		breq .L89
 781 045c 61C0      		rjmp .L98
 782               	.L99:
 783 045e 8630      		cpi r24,6
 784 0460 9105      		cpc r25,__zero_reg__
 785 0462 E9F0      		breq .L95
 786 0464 0797      		sbiw r24,7
 787 0466 99F0      		breq .L94
 788 0468 5BC0      		rjmp .L98
 789               	.L89:
 790               	.LM117:
 791 046a 8BE0      		ldi r24,lo8(11)
 792 046c 90E0      		ldi r25,hi8(11)
 793 046e 9093 0000 		sts (MessageSize)+1,r25
 794 0472 8093 0000 		sts MessageSize,r24
 795 0476 A0E0      		ldi r26,lo8(PacketBytes)
 796 0478 B0E0      		ldi r27,hi8(PacketBytes)
 797 047a E0E0      		ldi r30,lo8(SignonResponse)
 798 047c F0E0      		ldi r31,hi8(SignonResponse)
 799 047e 9AE0      		ldi r25,lo8(10)
 800               	.L93:
 801               	.LBB14:
 802               	.LBB15:
 803               	.LM118:
 804               	/* #APP */
 805 0480 8491      		lpm r24, Z
 806               		
 807               	/* #NOAPP */
 808               	.LBE15:
 809 0482 8D93      		st X+,r24
 810               	.LM119:
 811 0484 9150      		subi r25,lo8(-(-1))
 812 0486 3196      		adiw r30,1
 813 0488 97FF      		sbrs r25,7
 814 048a FACF      		rjmp .L93
 815 048c 58C0      		rjmp .L110
 816               	.L94:
 817               	.LBE14:
 818               	.LM120:
 819 048e 82E0      		ldi r24,lo8(2)
 820 0490 90E0      		ldi r25,hi8(2)
 821 0492 9093 0000 		sts (MessageSize)+1,r25
 822 0496 8093 0000 		sts MessageSize,r24
 823               	.LM121:
 824 049a 80EC      		ldi r24,lo8(-64)
 825 049c 4EC0      		rjmp .L111
 826               	.L95:
 827               	.LM122:
 828 049e 82E0      		ldi r24,lo8(2)
 829 04a0 90E0      		ldi r25,hi8(2)
 830 04a2 9093 0000 		sts (MessageSize)+1,r25
 831 04a6 8093 0000 		sts MessageSize,r24
 832               	.LM123:
 833 04aa 0E94 0000 		call V2P_CheckForExtendedAddress
 834               	.LM124:
 835 04ae 8091 0000 		lds r24,PacketBytes+1
 836 04b2 9927      		clr r25
 837 04b4 AA27      		clr r26
 838 04b6 BB27      		clr r27
 839 04b8 B82F      		mov r27,r24
 840 04ba AA27      		clr r26
 841 04bc 9927      		clr r25
 842 04be 8827      		clr r24
 843 04c0 2091 0000 		lds r18,PacketBytes+2
 844 04c4 3327      		clr r19
 845 04c6 4427      		clr r20
 846 04c8 5527      		clr r21
 847 04ca A901      		movw r20,r18
 848 04cc 3327      		clr r19
 849 04ce 2227      		clr r18
 850 04d0 822B      		or r24,r18
 851 04d2 932B      		or r25,r19
 852 04d4 A42B      		or r26,r20
 853 04d6 B52B      		or r27,r21
 854 04d8 2091 0000 		lds r18,PacketBytes+3
 855 04dc 3327      		clr r19
 856 04de 4427      		clr r20
 857 04e0 5527      		clr r21
 858 04e2 542F      		mov r21,r20
 859 04e4 432F      		mov r20,r19
 860 04e6 322F      		mov r19,r18
 861 04e8 2227      		clr r18
 862 04ea 822B      		or r24,r18
 863 04ec 932B      		or r25,r19
 864 04ee A42B      		or r26,r20
 865 04f0 B52B      		or r27,r21
 866 04f2 2091 0000 		lds r18,PacketBytes+4
 867 04f6 3327      		clr r19
 868 04f8 4427      		clr r20
 869 04fa 5527      		clr r21
 870 04fc 822B      		or r24,r18
 871 04fe 932B      		or r25,r19
 872 0500 A42B      		or r26,r20
 873 0502 B52B      		or r27,r21
 874 0504 8093 0000 		sts CurrAddress,r24
 875 0508 9093 0000 		sts (CurrAddress)+1,r25
 876 050c A093 0000 		sts (CurrAddress)+2,r26
 877 0510 B093 0000 		sts (CurrAddress)+3,r27
 878               	.LM125:
 879 0514 C093 0000 		sts PacketBytes+1,r28
 880 0518 12C0      		rjmp .L110
 881               	.L97:
 882               	.LM126:
 883 051a 0E94 0000 		call V2P_GetSetParamater
 884               	.LM127:
 885 051e 11C0      		rjmp .L109
 886               	.L98:
 887               	.LM128:
 888 0520 E091 0000 		lds r30,InterpretPacketRoutine
 889 0524 F091 0000 		lds r31,(InterpretPacketRoutine)+1
 890 0528 0995      		icall
 891 052a 0BC0      		rjmp .L109
 892               	.L87:
 893               	.LM129:
 894 052c 82E0      		ldi r24,lo8(2)
 895 052e 90E0      		ldi r25,hi8(2)
 896 0530 9093 0000 		sts (MessageSize)+1,r25
 897 0534 8093 0000 		sts MessageSize,r24
 898               	.LM130:
 899 0538 81EC      		ldi r24,lo8(-63)
 900               	.L111:
 901 053a 8093 0000 		sts PacketBytes+1,r24
 902               	.L110:
 903               	.LM131:
 904 053e 0E94 0000 		call V2P_SendPacket
 905               	.L109:
 906               	.LM132:
 907 0542 C8E0      		ldi r28,lo8(8)
 908 0544 B2CE      		rjmp .L112
 909               	.L52:
 910               	/* epilogue: frame size=0 */
 911 0546 CF91      		pop r28
 912 0548 1F91      		pop r17
 913 054a 0F91      		pop r16
 914 054c FF90      		pop r15
 915 054e EF90      		pop r14
 916 0550 0895      		ret
 917               	/* epilogue end (size=6) */
 918               	/* function V2P_RunStateMachine size 373 (362) */
 919               	.LFE14:
 921               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 V2Protocol.c
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:23     .bss:00000000 Param_ControllerInit
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:29     .bss:00000001 CurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:35     .bss:00000005 InProgrammingMode
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:41     .bss:00000006 MessageSize
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:47     .bss:00000008 SequenceNum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:53     .bss:0000000a PacketBytes
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:59     .data:00000000 InterpretPacketRoutine
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:65     .progmem.data:00000000 ButtLoadData
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:88     .progmem.data:00000013 SignonResponse
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:103    .text:00000000 V2P_GetChecksum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:157    .text:00000042 V2P_SendPacket
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:228    .text:000000c2 V2P_GetSetParamater
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:451    .text:00000204 V2P_IncrementCurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:476    .text:0000022c V2P_CheckForExtendedAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccg1aaaa.s:520    .text:0000027e V2P_RunStateMachine

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
AICI_InterpretPacket
USART_Tx
EEPROMVars
__eeprom_read_byte_1F2021
__eeprom_write_byte_1F2021
USI_SPISetSpeed
MAIN_ResetCSLine
USI_SPITransmit
BUFF_InitialiseBuffer
PacketTimeOut
PacketTimeOutTicks
BuffElements
TOUT_SetupSleepTimer
USART_Rx
