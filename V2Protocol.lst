   1               		.file	"V2Protocol.c"
   2               		.arch atmega169
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	Param_ControllerInit
  19               	.global	Param_ControllerInit
  20               		.section .bss
  23               	Param_ControllerInit:
  24 0000 00        		.skip 1,0
  25               	.global	CurrAddress
  26               	.global	CurrAddress
  29               	CurrAddress:
  30 0001 0000 0000 		.skip 4,0
  31               	.global	InProgrammingMode
  32               	.global	InProgrammingMode
  35               	InProgrammingMode:
  36 0005 00        		.skip 1,0
  37               	.global	MessageSize
  38               	.global	MessageSize
  41               	MessageSize:
  42 0006 0000      		.skip 2,0
  43               	.global	SequenceNum
  44               	.global	SequenceNum
  47               	SequenceNum:
  48 0008 0000      		.skip 2,0
  49               	.global	PacketBytes
  50               	.global	PacketBytes
  53               	PacketBytes:
  54 000a 0000 0000 		.skip 275,0
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  55               	.global	InterpretPacketRoutine
  56               		.data
  59               	InterpretPacketRoutine:
  60 0000 0000      		.word	pm(AICI_InterpretPacket)
  61               	.global	SignonResponse
  62               		.section	.progmem.data,"a",@progbits
  65               	SignonResponse:
  66 0000 01        		.byte	1
  67 0001 00        		.byte	0
  68 0002 08        		.byte	8
  69 0003 41        		.byte	65
  70 0004 56        		.byte	86
  71 0005 52        		.byte	82
  72 0006 49        		.byte	73
  73 0007 53        		.byte	83
  74 0008 50        		.byte	80
  75 0009 5F        		.byte	95
  76 000a 32        		.byte	50
  77               	.global	VersionData
  80               	VersionData:
  81 000b 02        		.byte	2
  82 000c 02        		.byte	2
  83 000d 04        		.byte	4
  84               		.text
  85               	.global	V2P_GetChecksum
  87               	V2P_GetChecksum:
  88               	.LFB10:
  89               	.LM1:
  90               	/* prologue: frame size=0 */
  91               	/* prologue end (size=0) */
  92               	.LM2:
  93 0000 6BE1      		ldi r22,lo8(27)
  94               	.LM3:
  95 0002 8091 0000 		lds r24,SequenceNum
  96 0006 6827      		eor r22,r24
  97               	.LM4:
  98 0008 2091 0000 		lds r18,MessageSize
  99 000c 3091 0000 		lds r19,(MessageSize)+1
 100 0010 832F      		mov r24,r19
 101 0012 9927      		clr r25
 102 0014 6827      		eor r22,r24
 103               	.LM5:
 104 0016 8091 0000 		lds r24,MessageSize
 105 001a 6827      		eor r22,r24
 106               	.LM6:
 107 001c 8EE0      		ldi r24,lo8(14)
 108 001e 6827      		eor r22,r24
 109               	.LBB2:
 110               	.LM7:
 111 0020 40E0      		ldi r20,lo8(0)
 112 0022 50E0      		ldi r21,hi8(0)
 113 0024 4217      		cp r20,r18
 114 0026 5307      		cpc r21,r19
 115 0028 48F4      		brsh .L7
 116 002a E0E0      		ldi r30,lo8(PacketBytes)
 117 002c F0E0      		ldi r31,hi8(PacketBytes)
 118               	.L5:
 119               	.LM8:
 120 002e 8191      		ld r24,Z+
 121 0030 6827      		eor r22,r24
 122               	.LM9:
 123 0032 4F5F      		subi r20,lo8(-(1))
 124 0034 5F4F      		sbci r21,hi8(-(1))
 125 0036 4217      		cp r20,r18
 126 0038 5307      		cpc r21,r19
 127 003a C8F3      		brlo .L5
 128               	.L7:
 129               	.LBE2:
 130               	.LM10:
 131 003c 862F      		mov r24,r22
 132 003e 9927      		clr r25
 133               	/* epilogue: frame size=0 */
 134 0040 0895      		ret
 135               	/* epilogue end (size=1) */
 136               	/* function V2P_GetChecksum size 33 (32) */
 137               	.LFE10:
 139               	.global	V2P_SendPacket
 141               	V2P_SendPacket:
 142               	.LFB9:
 143               	.LM11:
 144               	/* prologue: frame size=0 */
 145 0042 0F93      		push r16
 146 0044 1F93      		push r17
 147 0046 CF93      		push r28
 148 0048 DF93      		push r29
 149               	/* prologue end (size=4) */
 150               	.LM12:
 151 004a 8BE1      		ldi r24,lo8(27)
 152 004c 0E94 0000 		call USART_Tx
 153               	.LM13:
 154 0050 8091 0000 		lds r24,SequenceNum
 155 0054 0E94 0000 		call USART_Tx
 156               	.LM14:
 157 0058 8091 0000 		lds r24,MessageSize+1
 158 005c 0E94 0000 		call USART_Tx
 159               	.LM15:
 160 0060 8091 0000 		lds r24,MessageSize
 161 0064 0E94 0000 		call USART_Tx
 162               	.LM16:
 163 0068 8EE0      		ldi r24,lo8(14)
 164 006a 0E94 0000 		call USART_Tx
 165               	.LBB3:
 166               	.LM17:
 167 006e C0E0      		ldi r28,lo8(0)
 168 0070 D0E0      		ldi r29,hi8(0)
 169 0072 8091 0000 		lds r24,MessageSize
 170 0076 9091 0000 		lds r25,(MessageSize)+1
 171 007a C817      		cp r28,r24
 172 007c D907      		cpc r29,r25
 173 007e 78F4      		brsh .L14
 174 0080 00E0      		ldi r16,lo8(PacketBytes)
 175 0082 10E0      		ldi r17,hi8(PacketBytes)
 176               	.L12:
 177               	.LM18:
 178 0084 F801      		movw r30,r16
 179 0086 8191      		ld r24,Z+
 180 0088 8F01      		movw r16,r30
 181 008a 0E94 0000 		call USART_Tx
 182               	.LM19:
 183 008e 2196      		adiw r28,1
 184 0090 8091 0000 		lds r24,MessageSize
 185 0094 9091 0000 		lds r25,(MessageSize)+1
 186 0098 C817      		cp r28,r24
 187 009a D907      		cpc r29,r25
 188 009c 98F3      		brlo .L12
 189               	.L14:
 190               	.LBE3:
 191               	.LM20:
 192 009e 0E94 0000 		call V2P_GetChecksum
 193 00a2 0E94 0000 		call USART_Tx
 194               	.LM21:
 195 00a6 8091 0000 		lds r24,SequenceNum
 196 00aa 9091 0000 		lds r25,(SequenceNum)+1
 197 00ae 0196      		adiw r24,1
 198 00b0 9093 0000 		sts (SequenceNum)+1,r25
 199 00b4 8093 0000 		sts SequenceNum,r24
 200               	/* epilogue: frame size=0 */
 201 00b8 DF91      		pop r29
 202 00ba CF91      		pop r28
 203 00bc 1F91      		pop r17
 204 00be 0F91      		pop r16
 205 00c0 0895      		ret
 206               	/* epilogue end (size=5) */
 207               	/* function V2P_SendPacket size 64 (55) */
 208               	.LFE9:
 210               	.global	V2P_GetSetParamater
 212               	V2P_GetSetParamater:
 213               	.LFB11:
 214               	.LM22:
 215               	/* prologue: frame size=0 */
 216               	/* prologue end (size=0) */
 217               	.LM23:
 218 00c2 2091 0000 		lds r18,PacketBytes+1
 219               	.LM24:
 220 00c6 83E0      		ldi r24,lo8(3)
 221 00c8 90E0      		ldi r25,hi8(3)
 222 00ca 9093 0000 		sts (MessageSize)+1,r25
 223 00ce 8093 0000 		sts MessageSize,r24
 224               	.LM25:
 225 00d2 1092 0000 		sts PacketBytes+1,__zero_reg__
 226               	.LM26:
 227 00d6 E22F      		mov r30,r18
 228 00d8 FF27      		clr r31
 229 00da E839      		cpi r30,152
 230 00dc F105      		cpc r31,__zero_reg__
 231 00de ACF4      		brge .L36
 232               	.LM27:
 233 00e0 E639      		cpi r30,150
 234 00e2 F105      		cpc r31,__zero_reg__
 235 00e4 0CF0      		brlt .+2
 236 00e6 6DC0      		rjmp .L32
 237 00e8 E138      		cpi r30,129
 238 00ea F105      		cpc r31,__zero_reg__
 239 00ec F9F0      		breq .L18
 240 00ee E238      		cpi r30,130
 241 00f0 F105      		cpc r31,__zero_reg__
 242 00f2 24F4      		brge .L37
 243 00f4 E038      		cpi r30,128
 244 00f6 F105      		cpc r31,__zero_reg__
 245 00f8 B9F0      		breq .L17
 246 00fa 71C0      		rjmp .L35
 247               	.L37:
 248 00fc CF01      		movw r24,r30
 249 00fe 8059      		subi r24,lo8(-(-144))
 250 0100 9040      		sbci r25,hi8(-(-144))
 251 0102 0397      		sbiw r24,3
 252 0104 08F0      		brlo .+2
 253 0106 6BC0      		rjmp .L35
 254 0108 13C0      		rjmp .L21
 255               	.L36:
 256 010a EE39      		cpi r30,158
 257 010c F105      		cpc r31,__zero_reg__
 258 010e 09F4      		brne .+2
 259 0110 3DC0      		rjmp .L28
 260 0112 EF39      		cpi r30,159
 261 0114 F105      		cpc r31,__zero_reg__
 262 0116 24F4      		brge .L38
 263 0118 E839      		cpi r30,152
 264 011a F105      		cpc r31,__zero_reg__
 265 011c F9F0      		breq .L25
 266 011e 5FC0      		rjmp .L35
 267               	.L38:
 268 0120 EF39      		cpi r30,159
 269 0122 F105      		cpc r31,__zero_reg__
 270 0124 49F0      		breq .L22
 271 0126 5BC0      		rjmp .L35
 272               	.L17:
 273               	.LM28:
 274 0128 83E0      		ldi r24,lo8(3)
 275 012a 38C0      		rjmp .L40
 276               	.L18:
 277               	.LM29:
 278 012c 81E0      		ldi r24,lo8(1)
 279 012e 36C0      		rjmp .L40
 280               	.L21:
 281               	.LBB4:
 282               	.LM30:
 283 0130 E050      		subi r30,lo8(-(VersionData-144))
 284 0132 F040      		sbci r31,hi8(-(VersionData-144))
 285               	/* #APP */
 286 0134 8491      		lpm r24, Z
 287               		
 288               	/* #NOAPP */
 289 0136 32C0      		rjmp .L40
 290               	.L22:
 291               	.LBE4:
 292               	.LM31:
 293 0138 8091 0000 		lds r24,PacketBytes
 294 013c 8330      		cpi r24,lo8(3)
 295 013e 19F4      		brne .L23
 296               	.LM32:
 297 0140 8091 0000 		lds r24,Param_ControllerInit
 298 0144 2BC0      		rjmp .L40
 299               	.L23:
 300               	.LM33:
 301 0146 82E0      		ldi r24,lo8(2)
 302 0148 90E0      		ldi r25,hi8(2)
 303 014a 9093 0000 		sts (MessageSize)+1,r25
 304 014e 8093 0000 		sts MessageSize,r24
 305               	.LM34:
 306 0152 8091 0000 		lds r24,PacketBytes+2
 307 0156 8093 0000 		sts Param_ControllerInit,r24
 308               	.LM35:
 309 015a 4AC0      		rjmp .L16
 310               	.L25:
 311               	.LM36:
 312 015c 8091 0000 		lds r24,PacketBytes
 313 0160 8330      		cpi r24,lo8(3)
 314 0162 19F4      		brne .L26
 315               	.LM37:
 316 0164 80E0      		ldi r24,lo8(Param_SCKDuration)
 317 0166 90E0      		ldi r25,hi8(Param_SCKDuration)
 318 0168 17C0      		rjmp .L39
 319               	.L26:
 320               	.LM38:
 321 016a 82E0      		ldi r24,lo8(2)
 322 016c 90E0      		ldi r25,hi8(2)
 323 016e 9093 0000 		sts (MessageSize)+1,r25
 324 0172 8093 0000 		sts MessageSize,r24
 325               	.LM39:
 326 0176 6091 0000 		lds r22,PacketBytes+2
 327 017a 80E0      		ldi r24,lo8(Param_SCKDuration)
 328 017c 90E0      		ldi r25,hi8(Param_SCKDuration)
 329 017e 0E94 0000 		call eeprom_write_byte_169
 330               	.LM40:
 331 0182 8091 0000 		lds r24,PacketBytes+2
 332 0186 0E94 0000 		call USI_SPISetSpeed
 333               	.LM41:
 334 018a 32C0      		rjmp .L16
 335               	.L28:
 336               	.LM42:
 337 018c 8091 0000 		lds r24,PacketBytes
 338 0190 8330      		cpi r24,lo8(3)
 339 0192 39F4      		brne .L29
 340               	.LM43:
 341 0194 80E0      		ldi r24,lo8(Param_ResetPolarity)
 342 0196 90E0      		ldi r25,hi8(Param_ResetPolarity)
 343               	.L39:
 344 0198 0E94 0000 		call eeprom_read_byte_169
 345               	.L40:
 346 019c 8093 0000 		sts PacketBytes+2,r24
 347 01a0 27C0      		rjmp .L16
 348               	.L29:
 349               	.LM44:
 350 01a2 82E0      		ldi r24,lo8(2)
 351 01a4 90E0      		ldi r25,hi8(2)
 352 01a6 9093 0000 		sts (MessageSize)+1,r25
 353 01aa 8093 0000 		sts MessageSize,r24
 354               	.LM45:
 355 01ae 6091 0000 		lds r22,PacketBytes+2
 356 01b2 80E0      		ldi r24,lo8(Param_ResetPolarity)
 357 01b4 90E0      		ldi r25,hi8(Param_ResetPolarity)
 358 01b6 0E94 0000 		call eeprom_write_byte_169
 359               	.LM46:
 360 01ba 81E0      		ldi r24,lo8(1)
 361 01bc 0E94 0000 		call MAIN_ResetCSLine
 362               	.LM47:
 363 01c0 17C0      		rjmp .L16
 364               	.L32:
 365               	.LM48:
 366 01c2 8091 0000 		lds r24,PacketBytes
 367 01c6 8330      		cpi r24,lo8(3)
 368 01c8 19F4      		brne .L33
 369               	.LM49:
 370 01ca 1092 0000 		sts PacketBytes+2,__zero_reg__
 371 01ce 10C0      		rjmp .L16
 372               	.L33:
 373               	.LM50:
 374 01d0 82E0      		ldi r24,lo8(2)
 375 01d2 90E0      		ldi r25,hi8(2)
 376 01d4 9093 0000 		sts (MessageSize)+1,r25
 377 01d8 8093 0000 		sts MessageSize,r24
 378               	.LM51:
 379 01dc 09C0      		rjmp .L16
 380               	.L35:
 381               	.LM52:
 382 01de 82E0      		ldi r24,lo8(2)
 383 01e0 90E0      		ldi r25,hi8(2)
 384 01e2 9093 0000 		sts (MessageSize)+1,r25
 385 01e6 8093 0000 		sts MessageSize,r24
 386               	.LM53:
 387 01ea 80EC      		ldi r24,lo8(-64)
 388 01ec 8093 0000 		sts PacketBytes+1,r24
 389               	.L16:
 390               	.LM54:
 391 01f0 0E94 0000 		call V2P_SendPacket
 392               	/* epilogue: frame size=0 */
 393 01f4 0895      		ret
 394               	/* epilogue end (size=1) */
 395               	/* function V2P_GetSetParamater size 158 (157) */
 396               	.LFE11:
 398               	.global	V2P_IncrementCurrAddress
 400               	V2P_IncrementCurrAddress:
 401               	.LFB12:
 402               	.LM55:
 403               	/* prologue: frame size=0 */
 404               	/* prologue end (size=0) */
 405               	.LM56:
 406 01f6 8091 0000 		lds r24,CurrAddress
 407 01fa 9091 0000 		lds r25,(CurrAddress)+1
 408 01fe A091 0000 		lds r26,(CurrAddress)+2
 409 0202 B091 0000 		lds r27,(CurrAddress)+3
 410 0206 0196      		adiw r24,1
 411 0208 A11D      		adc r26,__zero_reg__
 412 020a B11D      		adc r27,__zero_reg__
 413 020c 8093 0000 		sts CurrAddress,r24
 414 0210 9093 0000 		sts (CurrAddress)+1,r25
 415 0214 A093 0000 		sts (CurrAddress)+2,r26
 416 0218 B093 0000 		sts (CurrAddress)+3,r27
 417               	/* epilogue: frame size=0 */
 418 021c 0895      		ret
 419               	/* epilogue end (size=1) */
 420               	/* function V2P_IncrementCurrAddress size 20 (19) */
 421               	.LFE12:
 423               	.global	V2P_CheckForExtendedAddress
 425               	V2P_CheckForExtendedAddress:
 426               	.LFB13:
 427               	.LM57:
 428               	/* prologue: frame size=0 */
 429               	/* prologue end (size=0) */
 430               	.LM58:
 431 021e 8091 0000 		lds r24,CurrAddress
 432 0222 9091 0000 		lds r25,(CurrAddress)+1
 433 0226 A091 0000 		lds r26,(CurrAddress)+2
 434 022a B091 0000 		lds r27,(CurrAddress)+3
 435 022e B7FF      		sbrs r27,7
 436 0230 1EC0      		rjmp .L42
 437               	.LM59:
 438 0232 8DE4      		ldi r24,lo8(77)
 439 0234 0E94 0000 		call USI_SPITransmit
 440               	.LM60:
 441 0238 80E0      		ldi r24,lo8(0)
 442 023a 0E94 0000 		call USI_SPITransmit
 443               	.LM61:
 444 023e 8091 0000 		lds r24,CurrAddress+2
 445 0242 0E94 0000 		call USI_SPITransmit
 446               	.LM62:
 447 0246 80E0      		ldi r24,lo8(0)
 448 0248 0E94 0000 		call USI_SPITransmit
 449               	.LM63:
 450 024c 8091 0000 		lds r24,CurrAddress
 451 0250 9091 0000 		lds r25,(CurrAddress)+1
 452 0254 A091 0000 		lds r26,(CurrAddress)+2
 453 0258 B091 0000 		lds r27,(CurrAddress)+3
 454 025c BF77      		andi r27,hhi8(2147483647)
 455 025e 8093 0000 		sts CurrAddress,r24
 456 0262 9093 0000 		sts (CurrAddress)+1,r25
 457 0266 A093 0000 		sts (CurrAddress)+2,r26
 458 026a B093 0000 		sts (CurrAddress)+3,r27
 459               	.L42:
 460 026e 0895      		ret
 461               	/* epilogue: frame size=0 */
 462               	/* epilogue: noreturn */
 463               	/* epilogue end (size=0) */
 464               	/* function V2P_CheckForExtendedAddress size 41 (41) */
 465               	.LFE13:
 467               	.global	V2P_RunStateMachine
 469               	V2P_RunStateMachine:
 470               	.LFB8:
 471               	.LM64:
 472               	/* prologue: frame size=0 */
 473 0270 EF92      		push r14
 474 0272 FF92      		push r15
 475 0274 0F93      		push r16
 476 0276 1F93      		push r17
 477 0278 CF93      		push r28
 478               	/* prologue end (size=5) */
 479               	.LM65:
 480 027a C0E0      		ldi r28,lo8(0)
 481               	.LM66:
 482 027c EE24      		clr r14
 483 027e FF24      		clr r15
 484               	.LM67:
 485 0280 8091 C100 		lds r24,193
 486 0284 8078      		andi r24,lo8(-128)
 487 0286 8861      		ori r24,lo8(24)
 488 0288 8093 C100 		sts 193,r24
 489 028c 80E0      		ldi r24,lo8(WaitText)
 490 028e 90E0      		ldi r25,hi8(WaitText)
 491 0290 0E94 0000 		call LCD_puts_f
 492 0294 0E94 0000 		call OSCCAL_Calibrate
 493               	.LM68:
 494 0298 0E94 0000 		call BUFF_InitialiseBuffer
 495               	.LM69:
 496 029c 0E94 0000 		call TIMEOUT_SetupTimeoutTimer
 497               	.LM70:
 498 02a0 C093 0000 		sts InProgrammingMode,r28
 499               	.LM71:
 500 02a4 1092 0000 		sts CurrAddress,__zero_reg__
 501 02a8 1092 0000 		sts (CurrAddress)+1,__zero_reg__
 502 02ac 1092 0000 		sts (CurrAddress)+2,__zero_reg__
 503 02b0 1092 0000 		sts (CurrAddress)+3,__zero_reg__
 504               	.L106:
 505               	.LM72:
 506 02b4 8091 0000 		lds r24,TimeOut
 507 02b8 8130      		cpi r24,lo8(1)
 508 02ba 11F4      		brne .L51
 509               	.LM73:
 510 02bc C9E0      		ldi r28,lo8(9)
 511 02be 05C0      		rjmp .L52
 512               	.L51:
 513               	.LM74:
 514 02c0 CC23      		tst r28
 515 02c2 19F0      		breq .L52
 516               	.LM75:
 517 02c4 83E0      		ldi r24,lo8(3)
 518 02c6 8093 8100 		sts 129,r24
 519               	.L52:
 520               	.LM76:
 521 02ca 8C2F      		mov r24,r28
 522 02cc 9927      		clr r25
 523 02ce 8430      		cpi r24,4
 524 02d0 9105      		cpc r25,__zero_reg__
 525 02d2 09F4      		brne .+2
 526 02d4 73C0      		rjmp .L71
 527 02d6 8530      		cpi r24,5
 528 02d8 9105      		cpc r25,__zero_reg__
 529 02da 94F4      		brge .L95
 530 02dc 8130      		cpi r24,1
 531 02de 9105      		cpc r25,__zero_reg__
 532 02e0 09F4      		brne .+2
 533 02e2 52C0      		rjmp .L66
 534 02e4 8230      		cpi r24,2
 535 02e6 9105      		cpc r25,__zero_reg__
 536 02e8 1CF4      		brge .L96
 537 02ea 892B      		or r24,r25
 538 02ec B1F1      		breq .L59
 539 02ee E2CF      		rjmp .L106
 540               	.L96:
 541 02f0 8230      		cpi r24,2
 542 02f2 9105      		cpc r25,__zero_reg__
 543 02f4 09F4      		brne .+2
 544 02f6 4EC0      		rjmp .L69
 545 02f8 0397      		sbiw r24,3
 546 02fa 09F4      		brne .+2
 547 02fc 54C0      		rjmp .L70
 548 02fe DACF      		rjmp .L106
 549               	.L95:
 550 0300 8730      		cpi r24,7
 551 0302 9105      		cpc r25,__zero_reg__
 552 0304 09F4      		brne .+2
 553 0306 8BC0      		rjmp .L80
 554 0308 8830      		cpi r24,8
 555 030a 9105      		cpc r25,__zero_reg__
 556 030c 44F4      		brge .L97
 557 030e 8530      		cpi r24,5
 558 0310 9105      		cpc r25,__zero_reg__
 559 0312 09F4      		brne .+2
 560 0314 68C0      		rjmp .L74
 561 0316 0697      		sbiw r24,6
 562 0318 09F4      		brne .+2
 563 031a 6DC0      		rjmp .L77
 564 031c CBCF      		rjmp .L106
 565               	.L97:
 566 031e 8830      		cpi r24,8
 567 0320 9105      		cpc r25,__zero_reg__
 568 0322 79F0      		breq .L57
 569 0324 0997      		sbiw r24,9
 570 0326 31F6      		brne .L106
 571               	.LM77:
 572 0328 82E0      		ldi r24,lo8(2)
 573 032a 90E0      		ldi r25,hi8(2)
 574 032c 9093 0000 		sts (MessageSize)+1,r25
 575 0330 8093 0000 		sts MessageSize,r24
 576               	.LM78:
 577 0334 80EC      		ldi r24,lo8(-64)
 578 0336 8093 0000 		sts PacketBytes+1,r24
 579               	.LM79:
 580 033a 1092 0000 		sts TimeOut,__zero_reg__
 581               	.LM80:
 582 033e 0E94 0000 		call V2P_SendPacket
 583               	.L57:
 584               	.LM81:
 585 0342 0E94 0000 		call BUFF_InitialiseBuffer
 586               	.LM82:
 587 0346 1092 8100 		sts 129,__zero_reg__
 588 034a 1092 0000 		sts Ticks,__zero_reg__
 589 034e 1092 8500 		sts (132)+1,__zero_reg__
 590 0352 1092 8400 		sts 132,__zero_reg__
 591               	.LM83:
 592 0356 C0E0      		ldi r28,lo8(0)
 593               	.LM84:
 594 0358 ADCF      		rjmp .L106
 595               	.L59:
 596               	.LM85:
 597 035a 8091 0000 		lds r24,BuffElements
 598 035e 8111      		cpse r24,__zero_reg__
 599               	.LM86:
 600 0360 C1E0      		ldi r28,lo8(1)
 601               	.L60:
 602               	.LM87:
 603 0362 F29B      		sbis 62-0x20,2
 604 0364 A7CF      		rjmp .L106
 605 0366 8091 0000 		lds r24,InProgrammingMode
 606 036a 8823      		tst r24
 607 036c 09F0      		breq .+2
 608 036e A2CF      		rjmp .L106
 609               	.LM88:
 610 0370 8091 C100 		lds r24,193
 611 0374 8078      		andi r24,lo8(-128)
 612 0376 8093 C100 		sts 193,r24
 613 037a 80E8      		ldi r24,lo8(-128)
 614 037c 8093 6100 		sts 97,r24
 615 0380 83E0      		ldi r24,lo8(3)
 616 0382 8093 6100 		sts 97,r24
 617               	.LM89:
 618 0386 D4C0      		rjmp .L44
 619               	.L66:
 620               	.LM90:
 621 0388 0E94 0000 		call USART_Rx
 622 038c 8B31      		cpi r24,lo8(27)
 623 038e 89F5      		brne .L75
 624               	.LM91:
 625 0390 C2E0      		ldi r28,lo8(2)
 626 0392 90CF      		rjmp .L106
 627               	.L69:
 628               	.LM92:
 629 0394 0E94 0000 		call USART_Rx
 630 0398 9927      		clr r25
 631 039a 9093 0000 		sts (SequenceNum)+1,r25
 632 039e 8093 0000 		sts SequenceNum,r24
 633               	.LM93:
 634 03a2 C3E0      		ldi r28,lo8(3)
 635               	.LM94:
 636 03a4 87CF      		rjmp .L106
 637               	.L70:
 638               	.LM95:
 639 03a6 0E94 0000 		call USART_Rx
 640 03aa 9927      		clr r25
 641 03ac 982F      		mov r25,r24
 642 03ae 8827      		clr r24
 643 03b0 9093 0000 		sts (MessageSize)+1,r25
 644 03b4 8093 0000 		sts MessageSize,r24
 645               	.LM96:
 646 03b8 C4E0      		ldi r28,lo8(4)
 647               	.LM97:
 648 03ba 7CCF      		rjmp .L106
 649               	.L71:
 650               	.LM98:
 651 03bc 0E94 0000 		call USART_Rx
 652 03c0 282F      		mov r18,r24
 653 03c2 3327      		clr r19
 654 03c4 8091 0000 		lds r24,MessageSize
 655 03c8 9091 0000 		lds r25,(MessageSize)+1
 656 03cc 822B      		or r24,r18
 657 03ce 932B      		or r25,r19
 658 03d0 9093 0000 		sts (MessageSize)+1,r25
 659 03d4 8093 0000 		sts MessageSize,r24
 660               	.LM99:
 661 03d8 8351      		subi r24,lo8(275)
 662 03da 9140      		sbci r25,hi8(275)
 663 03dc 50F4      		brsh .L75
 664               	.LM100:
 665 03de C5E0      		ldi r28,lo8(5)
 666               	.LM101:
 667 03e0 EE24      		clr r14
 668 03e2 FF24      		clr r15
 669 03e4 67CF      		rjmp .L106
 670               	.L74:
 671               	.LM102:
 672 03e6 0E94 0000 		call USART_Rx
 673 03ea 8E30      		cpi r24,lo8(14)
 674 03ec 11F4      		brne .L75
 675               	.LM103:
 676 03ee C6E0      		ldi r28,lo8(6)
 677 03f0 61CF      		rjmp .L106
 678               	.L75:
 679               	.LM104:
 680 03f2 C9E0      		ldi r28,lo8(9)
 681               	.LM105:
 682 03f4 5FCF      		rjmp .L106
 683               	.L77:
 684               	.LM106:
 685 03f6 8091 0000 		lds r24,MessageSize
 686 03fa 9091 0000 		lds r25,(MessageSize)+1
 687 03fe E816      		cp r14,r24
 688 0400 F906      		cpc r15,r25
 689 0402 11F4      		brne .L78
 690               	.LM107:
 691 0404 C7E0      		ldi r28,lo8(7)
 692 0406 56CF      		rjmp .L106
 693               	.L78:
 694               	.LM108:
 695 0408 8701      		movw r16,r14
 696 040a 0050      		subi r16,lo8(-(PacketBytes))
 697 040c 1040      		sbci r17,hi8(-(PacketBytes))
 698 040e 0894      		sec
 699 0410 E11C      		adc r14,__zero_reg__
 700 0412 F11C      		adc r15,__zero_reg__
 701 0414 0E94 0000 		call USART_Rx
 702 0418 F801      		movw r30,r16
 703 041a 8083      		st Z,r24
 704               	.LM109:
 705 041c 4BCF      		rjmp .L106
 706               	.L80:
 707               	.LM110:
 708 041e 0E94 0000 		call V2P_GetChecksum
 709 0422 182F      		mov r17,r24
 710 0424 0E94 0000 		call USART_Rx
 711 0428 1817      		cp r17,r24
 712 042a 09F0      		breq .+2
 713 042c 74C0      		rjmp .L81
 714               	.LM111:
 715 042e 8091 0000 		lds r24,PacketBytes
 716 0432 9927      		clr r25
 717 0434 8430      		cpi r24,4
 718 0436 9105      		cpc r25,__zero_reg__
 719 0438 3CF4      		brge .L93
 720 043a 8230      		cpi r24,2
 721 043c 9105      		cpc r25,__zero_reg__
 722 043e 0CF0      		brlt .+2
 723 0440 61C0      		rjmp .L91
 724 0442 0197      		sbiw r24,1
 725 0444 39F0      		breq .L83
 726 0446 61C0      		rjmp .L92
 727               	.L93:
 728 0448 8630      		cpi r24,6
 729 044a 9105      		cpc r25,__zero_reg__
 730 044c E9F0      		breq .L89
 731 044e 0797      		sbiw r24,7
 732 0450 99F0      		breq .L88
 733 0452 5BC0      		rjmp .L92
 734               	.L83:
 735               	.LM112:
 736 0454 8BE0      		ldi r24,lo8(11)
 737 0456 90E0      		ldi r25,hi8(11)
 738 0458 9093 0000 		sts (MessageSize)+1,r25
 739 045c 8093 0000 		sts MessageSize,r24
 740 0460 A0E0      		ldi r26,lo8(PacketBytes)
 741 0462 B0E0      		ldi r27,hi8(PacketBytes)
 742 0464 E0E0      		ldi r30,lo8(SignonResponse)
 743 0466 F0E0      		ldi r31,hi8(SignonResponse)
 744 0468 9AE0      		ldi r25,lo8(10)
 745               	.L87:
 746               	.LBB5:
 747               	.LBB6:
 748               	.LM113:
 749               	/* #APP */
 750 046a 8491      		lpm r24, Z
 751               		
 752               	/* #NOAPP */
 753               	.LBE6:
 754 046c 8D93      		st X+,r24
 755               	.LM114:
 756 046e 9150      		subi r25,lo8(-(-1))
 757 0470 3196      		adiw r30,1
 758 0472 97FF      		sbrs r25,7
 759 0474 FACF      		rjmp .L87
 760 0476 58C0      		rjmp .L104
 761               	.L88:
 762               	.LBE5:
 763               	.LM115:
 764 0478 82E0      		ldi r24,lo8(2)
 765 047a 90E0      		ldi r25,hi8(2)
 766 047c 9093 0000 		sts (MessageSize)+1,r25
 767 0480 8093 0000 		sts MessageSize,r24
 768               	.LM116:
 769 0484 80EC      		ldi r24,lo8(-64)
 770 0486 4EC0      		rjmp .L105
 771               	.L89:
 772               	.LM117:
 773 0488 82E0      		ldi r24,lo8(2)
 774 048a 90E0      		ldi r25,hi8(2)
 775 048c 9093 0000 		sts (MessageSize)+1,r25
 776 0490 8093 0000 		sts MessageSize,r24
 777               	.LM118:
 778 0494 0E94 0000 		call V2P_CheckForExtendedAddress
 779               	.LM119:
 780 0498 8091 0000 		lds r24,PacketBytes+1
 781 049c 9927      		clr r25
 782 049e AA27      		clr r26
 783 04a0 BB27      		clr r27
 784 04a2 B82F      		mov r27,r24
 785 04a4 AA27      		clr r26
 786 04a6 9927      		clr r25
 787 04a8 8827      		clr r24
 788 04aa 2091 0000 		lds r18,PacketBytes+2
 789 04ae 3327      		clr r19
 790 04b0 4427      		clr r20
 791 04b2 5527      		clr r21
 792 04b4 A901      		movw r20,r18
 793 04b6 3327      		clr r19
 794 04b8 2227      		clr r18
 795 04ba 822B      		or r24,r18
 796 04bc 932B      		or r25,r19
 797 04be A42B      		or r26,r20
 798 04c0 B52B      		or r27,r21
 799 04c2 2091 0000 		lds r18,PacketBytes+3
 800 04c6 3327      		clr r19
 801 04c8 4427      		clr r20
 802 04ca 5527      		clr r21
 803 04cc 542F      		mov r21,r20
 804 04ce 432F      		mov r20,r19
 805 04d0 322F      		mov r19,r18
 806 04d2 2227      		clr r18
 807 04d4 822B      		or r24,r18
 808 04d6 932B      		or r25,r19
 809 04d8 A42B      		or r26,r20
 810 04da B52B      		or r27,r21
 811 04dc 2091 0000 		lds r18,PacketBytes+4
 812 04e0 3327      		clr r19
 813 04e2 4427      		clr r20
 814 04e4 5527      		clr r21
 815 04e6 822B      		or r24,r18
 816 04e8 932B      		or r25,r19
 817 04ea A42B      		or r26,r20
 818 04ec B52B      		or r27,r21
 819 04ee 8093 0000 		sts CurrAddress,r24
 820 04f2 9093 0000 		sts (CurrAddress)+1,r25
 821 04f6 A093 0000 		sts (CurrAddress)+2,r26
 822 04fa B093 0000 		sts (CurrAddress)+3,r27
 823               	.LM120:
 824 04fe 1092 0000 		sts PacketBytes+1,__zero_reg__
 825 0502 12C0      		rjmp .L104
 826               	.L91:
 827               	.LM121:
 828 0504 0E94 0000 		call V2P_GetSetParamater
 829               	.LM122:
 830 0508 11C0      		rjmp .L103
 831               	.L92:
 832               	.LM123:
 833 050a E091 0000 		lds r30,InterpretPacketRoutine
 834 050e F091 0000 		lds r31,(InterpretPacketRoutine)+1
 835 0512 0995      		icall
 836 0514 0BC0      		rjmp .L103
 837               	.L81:
 838               	.LM124:
 839 0516 82E0      		ldi r24,lo8(2)
 840 0518 90E0      		ldi r25,hi8(2)
 841 051a 9093 0000 		sts (MessageSize)+1,r25
 842 051e 8093 0000 		sts MessageSize,r24
 843               	.LM125:
 844 0522 81EC      		ldi r24,lo8(-63)
 845               	.L105:
 846 0524 8093 0000 		sts PacketBytes+1,r24
 847               	.L104:
 848               	.LM126:
 849 0528 0E94 0000 		call V2P_SendPacket
 850               	.L103:
 851               	.LM127:
 852 052c C8E0      		ldi r28,lo8(8)
 853 052e C2CE      		rjmp .L106
 854               	.L44:
 855               	/* epilogue: frame size=0 */
 856 0530 CF91      		pop r28
 857 0532 1F91      		pop r17
 858 0534 0F91      		pop r16
 859 0536 FF90      		pop r15
 860 0538 EF90      		pop r14
 861 053a 0895      		ret
 862               	/* epilogue end (size=6) */
 863               	/* function V2P_RunStateMachine size 368 (357) */
 864               	.LFE8:
 866               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 V2Protocol.c
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:23     .bss:00000000 Param_ControllerInit
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:29     .bss:00000001 CurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:35     .bss:00000005 InProgrammingMode
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:41     .bss:00000006 MessageSize
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:47     .bss:00000008 SequenceNum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:53     .bss:0000000a PacketBytes
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:59     .data:00000000 InterpretPacketRoutine
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:65     .progmem.data:00000000 SignonResponse
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:80     .progmem.data:0000000b VersionData
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:87     .text:00000000 V2P_GetChecksum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:141    .text:00000042 V2P_SendPacket
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:212    .text:000000c2 V2P_GetSetParamater
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:400    .text:000001f6 V2P_IncrementCurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:425    .text:0000021e V2P_CheckForExtendedAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccEHaaaa.s:469    .text:00000270 V2P_RunStateMachine

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
AICI_InterpretPacket
USART_Tx
Param_SCKDuration
eeprom_write_byte_169
USI_SPISetSpeed
Param_ResetPolarity
eeprom_read_byte_169
MAIN_ResetCSLine
USI_SPITransmit
WaitText
LCD_puts_f
OSCCAL_Calibrate
BUFF_InitialiseBuffer
TIMEOUT_SetupTimeoutTimer
TimeOut
Ticks
BuffElements
USART_Rx
