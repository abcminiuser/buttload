   1               		.file	"V2Protocol.c"
   2               		.arch atmega169
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	Param_ControllerInit
  19               	.global	Param_ControllerInit
  20               		.section .bss
  23               	Param_ControllerInit:
  24 0000 00        		.skip 1,0
  25               	.global	CurrAddress
  26               	.global	CurrAddress
  29               	CurrAddress:
  30 0001 0000 0000 		.skip 4,0
  31               	.global	InProgrammingMode
  32               	.global	InProgrammingMode
  35               	InProgrammingMode:
  36 0005 00        		.skip 1,0
  37               	.global	MessageSize
  38               	.global	MessageSize
  41               	MessageSize:
  42 0006 0000      		.skip 2,0
  43               	.global	SequenceNum
  44               	.global	SequenceNum
  47               	SequenceNum:
  48 0008 0000      		.skip 2,0
  49               	.global	PacketBytes
  50               	.global	PacketBytes
  53               	PacketBytes:
  54 000a 0000 0000 		.skip 275,0
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  54      0000 0000 
  55               	.global	InterpretPacketRoutine
  56               		.data
  59               	InterpretPacketRoutine:
  60 0000 0000      		.word	pm(AICI_InterpretPacket)
  61               	.global	SignonResponse
  62               		.section	.progmem.data,"a",@progbits
  65               	SignonResponse:
  66 0000 01        		.byte	1
  67 0001 00        		.byte	0
  68 0002 08        		.byte	8
  69 0003 41        		.byte	65
  70 0004 56        		.byte	86
  71 0005 52        		.byte	82
  72 0006 49        		.byte	73
  73 0007 53        		.byte	83
  74 0008 50        		.byte	80
  75 0009 5F        		.byte	95
  76 000a 32        		.byte	50
  77               	.global	VersionData
  80               	VersionData:
  81 000b 02        		.byte	2
  82 000c 02        		.byte	2
  83 000d 04        		.byte	4
  84               		.text
  85               	.global	V2P_GetChecksum
  87               	V2P_GetChecksum:
  88               	.LFB10:
  89               	.LM1:
  90               	/* prologue: frame size=0 */
  91               	/* prologue end (size=0) */
  92               	.LM2:
  93 0000 6BE1      		ldi r22,lo8(27)
  94               	.LM3:
  95 0002 8091 0000 		lds r24,SequenceNum
  96 0006 6827      		eor r22,r24
  97               	.LM4:
  98 0008 2091 0000 		lds r18,MessageSize
  99 000c 3091 0000 		lds r19,(MessageSize)+1
 100 0010 832F      		mov r24,r19
 101 0012 9927      		clr r25
 102 0014 6827      		eor r22,r24
 103               	.LM5:
 104 0016 8091 0000 		lds r24,MessageSize
 105 001a 6827      		eor r22,r24
 106               	.LM6:
 107 001c 8EE0      		ldi r24,lo8(14)
 108 001e 6827      		eor r22,r24
 109               	.LBB2:
 110               	.LM7:
 111 0020 40E0      		ldi r20,lo8(0)
 112 0022 50E0      		ldi r21,hi8(0)
 113 0024 4217      		cp r20,r18
 114 0026 5307      		cpc r21,r19
 115 0028 48F4      		brsh .L7
 116 002a E0E0      		ldi r30,lo8(PacketBytes)
 117 002c F0E0      		ldi r31,hi8(PacketBytes)
 118               	.L5:
 119               	.LM8:
 120 002e 8191      		ld r24,Z+
 121 0030 6827      		eor r22,r24
 122               	.LM9:
 123 0032 4F5F      		subi r20,lo8(-(1))
 124 0034 5F4F      		sbci r21,hi8(-(1))
 125 0036 4217      		cp r20,r18
 126 0038 5307      		cpc r21,r19
 127 003a C8F3      		brlo .L5
 128               	.L7:
 129               	.LBE2:
 130               	.LM10:
 131 003c 862F      		mov r24,r22
 132 003e 9927      		clr r25
 133               	/* epilogue: frame size=0 */
 134 0040 0895      		ret
 135               	/* epilogue end (size=1) */
 136               	/* function V2P_GetChecksum size 33 (32) */
 137               	.LFE10:
 139               	.global	V2P_SendPacket
 141               	V2P_SendPacket:
 142               	.LFB9:
 143               	.LM11:
 144               	/* prologue: frame size=0 */
 145 0042 0F93      		push r16
 146 0044 1F93      		push r17
 147 0046 CF93      		push r28
 148 0048 DF93      		push r29
 149               	/* prologue end (size=4) */
 150               	.LM12:
 151 004a 8BE1      		ldi r24,lo8(27)
 152 004c 0E94 0000 		call USART_Tx
 153               	.LM13:
 154 0050 8091 0000 		lds r24,SequenceNum
 155 0054 0E94 0000 		call USART_Tx
 156               	.LM14:
 157 0058 8091 0000 		lds r24,MessageSize+1
 158 005c 0E94 0000 		call USART_Tx
 159               	.LM15:
 160 0060 8091 0000 		lds r24,MessageSize
 161 0064 0E94 0000 		call USART_Tx
 162               	.LM16:
 163 0068 8EE0      		ldi r24,lo8(14)
 164 006a 0E94 0000 		call USART_Tx
 165               	.LBB3:
 166               	.LM17:
 167 006e C0E0      		ldi r28,lo8(0)
 168 0070 D0E0      		ldi r29,hi8(0)
 169 0072 8091 0000 		lds r24,MessageSize
 170 0076 9091 0000 		lds r25,(MessageSize)+1
 171 007a C817      		cp r28,r24
 172 007c D907      		cpc r29,r25
 173 007e 78F4      		brsh .L14
 174 0080 00E0      		ldi r16,lo8(PacketBytes)
 175 0082 10E0      		ldi r17,hi8(PacketBytes)
 176               	.L12:
 177               	.LM18:
 178 0084 F801      		movw r30,r16
 179 0086 8191      		ld r24,Z+
 180 0088 8F01      		movw r16,r30
 181 008a 0E94 0000 		call USART_Tx
 182               	.LM19:
 183 008e 2196      		adiw r28,1
 184 0090 8091 0000 		lds r24,MessageSize
 185 0094 9091 0000 		lds r25,(MessageSize)+1
 186 0098 C817      		cp r28,r24
 187 009a D907      		cpc r29,r25
 188 009c 98F3      		brlo .L12
 189               	.L14:
 190               	.LBE3:
 191               	.LM20:
 192 009e 0E94 0000 		call V2P_GetChecksum
 193 00a2 0E94 0000 		call USART_Tx
 194               	.LM21:
 195 00a6 8091 0000 		lds r24,SequenceNum
 196 00aa 9091 0000 		lds r25,(SequenceNum)+1
 197 00ae 0196      		adiw r24,1
 198 00b0 9093 0000 		sts (SequenceNum)+1,r25
 199 00b4 8093 0000 		sts SequenceNum,r24
 200               	/* epilogue: frame size=0 */
 201 00b8 DF91      		pop r29
 202 00ba CF91      		pop r28
 203 00bc 1F91      		pop r17
 204 00be 0F91      		pop r16
 205 00c0 0895      		ret
 206               	/* epilogue end (size=5) */
 207               	/* function V2P_SendPacket size 64 (55) */
 208               	.LFE9:
 210               	.global	V2P_GetSetParamater
 212               	V2P_GetSetParamater:
 213               	.LFB11:
 214               	.LM22:
 215               	/* prologue: frame size=0 */
 216               	/* prologue end (size=0) */
 217               	.LM23:
 218 00c2 2091 0000 		lds r18,PacketBytes+1
 219               	.LM24:
 220 00c6 83E0      		ldi r24,lo8(3)
 221 00c8 90E0      		ldi r25,hi8(3)
 222 00ca 9093 0000 		sts (MessageSize)+1,r25
 223 00ce 8093 0000 		sts MessageSize,r24
 224               	.LM25:
 225 00d2 1092 0000 		sts PacketBytes+1,__zero_reg__
 226               	.LM26:
 227 00d6 E22F      		mov r30,r18
 228 00d8 FF27      		clr r31
 229 00da E839      		cpi r30,152
 230 00dc F105      		cpc r31,__zero_reg__
 231 00de ACF4      		brge .L36
 232               	.LM27:
 233 00e0 E639      		cpi r30,150
 234 00e2 F105      		cpc r31,__zero_reg__
 235 00e4 0CF0      		brlt .+2
 236 00e6 6DC0      		rjmp .L32
 237 00e8 E138      		cpi r30,129
 238 00ea F105      		cpc r31,__zero_reg__
 239 00ec F9F0      		breq .L18
 240 00ee E238      		cpi r30,130
 241 00f0 F105      		cpc r31,__zero_reg__
 242 00f2 24F4      		brge .L37
 243 00f4 E038      		cpi r30,128
 244 00f6 F105      		cpc r31,__zero_reg__
 245 00f8 B9F0      		breq .L17
 246 00fa 71C0      		rjmp .L35
 247               	.L37:
 248 00fc CF01      		movw r24,r30
 249 00fe 8059      		subi r24,lo8(-(-144))
 250 0100 9040      		sbci r25,hi8(-(-144))
 251 0102 0397      		sbiw r24,3
 252 0104 08F0      		brlo .+2
 253 0106 6BC0      		rjmp .L35
 254 0108 13C0      		rjmp .L21
 255               	.L36:
 256 010a EE39      		cpi r30,158
 257 010c F105      		cpc r31,__zero_reg__
 258 010e 09F4      		brne .+2
 259 0110 3DC0      		rjmp .L28
 260 0112 EF39      		cpi r30,159
 261 0114 F105      		cpc r31,__zero_reg__
 262 0116 24F4      		brge .L38
 263 0118 E839      		cpi r30,152
 264 011a F105      		cpc r31,__zero_reg__
 265 011c F9F0      		breq .L25
 266 011e 5FC0      		rjmp .L35
 267               	.L38:
 268 0120 EF39      		cpi r30,159
 269 0122 F105      		cpc r31,__zero_reg__
 270 0124 49F0      		breq .L22
 271 0126 5BC0      		rjmp .L35
 272               	.L17:
 273               	.LM28:
 274 0128 83E0      		ldi r24,lo8(3)
 275 012a 38C0      		rjmp .L40
 276               	.L18:
 277               	.LM29:
 278 012c 81E0      		ldi r24,lo8(1)
 279 012e 36C0      		rjmp .L40
 280               	.L21:
 281               	.LBB4:
 282               	.LM30:
 283 0130 E050      		subi r30,lo8(-(VersionData-144))
 284 0132 F040      		sbci r31,hi8(-(VersionData-144))
 285               	/* #APP */
 286 0134 8491      		lpm r24, Z
 287               		
 288               	/* #NOAPP */
 289 0136 32C0      		rjmp .L40
 290               	.L22:
 291               	.LBE4:
 292               	.LM31:
 293 0138 8091 0000 		lds r24,PacketBytes
 294 013c 8330      		cpi r24,lo8(3)
 295 013e 19F4      		brne .L23
 296               	.LM32:
 297 0140 8091 0000 		lds r24,Param_ControllerInit
 298 0144 2BC0      		rjmp .L40
 299               	.L23:
 300               	.LM33:
 301 0146 82E0      		ldi r24,lo8(2)
 302 0148 90E0      		ldi r25,hi8(2)
 303 014a 9093 0000 		sts (MessageSize)+1,r25
 304 014e 8093 0000 		sts MessageSize,r24
 305               	.LM34:
 306 0152 8091 0000 		lds r24,PacketBytes+2
 307 0156 8093 0000 		sts Param_ControllerInit,r24
 308               	.LM35:
 309 015a 4AC0      		rjmp .L16
 310               	.L25:
 311               	.LM36:
 312 015c 8091 0000 		lds r24,PacketBytes
 313 0160 8330      		cpi r24,lo8(3)
 314 0162 19F4      		brne .L26
 315               	.LM37:
 316 0164 80E0      		ldi r24,lo8(Param_SCKDuration)
 317 0166 90E0      		ldi r25,hi8(Param_SCKDuration)
 318 0168 17C0      		rjmp .L39
 319               	.L26:
 320               	.LM38:
 321 016a 82E0      		ldi r24,lo8(2)
 322 016c 90E0      		ldi r25,hi8(2)
 323 016e 9093 0000 		sts (MessageSize)+1,r25
 324 0172 8093 0000 		sts MessageSize,r24
 325               	.LM39:
 326 0176 6091 0000 		lds r22,PacketBytes+2
 327 017a 80E0      		ldi r24,lo8(Param_SCKDuration)
 328 017c 90E0      		ldi r25,hi8(Param_SCKDuration)
 329 017e 0E94 0000 		call eeprom_write_byte_169
 330               	.LM40:
 331 0182 8091 0000 		lds r24,PacketBytes+2
 332 0186 0E94 0000 		call USI_SPISetSpeed
 333               	.LM41:
 334 018a 32C0      		rjmp .L16
 335               	.L28:
 336               	.LM42:
 337 018c 8091 0000 		lds r24,PacketBytes
 338 0190 8330      		cpi r24,lo8(3)
 339 0192 39F4      		brne .L29
 340               	.LM43:
 341 0194 80E0      		ldi r24,lo8(Param_ResetPolarity)
 342 0196 90E0      		ldi r25,hi8(Param_ResetPolarity)
 343               	.L39:
 344 0198 0E94 0000 		call eeprom_read_byte_169
 345               	.L40:
 346 019c 8093 0000 		sts PacketBytes+2,r24
 347 01a0 27C0      		rjmp .L16
 348               	.L29:
 349               	.LM44:
 350 01a2 82E0      		ldi r24,lo8(2)
 351 01a4 90E0      		ldi r25,hi8(2)
 352 01a6 9093 0000 		sts (MessageSize)+1,r25
 353 01aa 8093 0000 		sts MessageSize,r24
 354               	.LM45:
 355 01ae 6091 0000 		lds r22,PacketBytes+2
 356 01b2 80E0      		ldi r24,lo8(Param_ResetPolarity)
 357 01b4 90E0      		ldi r25,hi8(Param_ResetPolarity)
 358 01b6 0E94 0000 		call eeprom_write_byte_169
 359               	.LM46:
 360 01ba 81E0      		ldi r24,lo8(1)
 361 01bc 0E94 0000 		call MAIN_ResetCSLine
 362               	.LM47:
 363 01c0 17C0      		rjmp .L16
 364               	.L32:
 365               	.LM48:
 366 01c2 8091 0000 		lds r24,PacketBytes
 367 01c6 8330      		cpi r24,lo8(3)
 368 01c8 19F4      		brne .L33
 369               	.LM49:
 370 01ca 1092 0000 		sts PacketBytes+2,__zero_reg__
 371 01ce 10C0      		rjmp .L16
 372               	.L33:
 373               	.LM50:
 374 01d0 82E0      		ldi r24,lo8(2)
 375 01d2 90E0      		ldi r25,hi8(2)
 376 01d4 9093 0000 		sts (MessageSize)+1,r25
 377 01d8 8093 0000 		sts MessageSize,r24
 378               	.LM51:
 379 01dc 09C0      		rjmp .L16
 380               	.L35:
 381               	.LM52:
 382 01de 82E0      		ldi r24,lo8(2)
 383 01e0 90E0      		ldi r25,hi8(2)
 384 01e2 9093 0000 		sts (MessageSize)+1,r25
 385 01e6 8093 0000 		sts MessageSize,r24
 386               	.LM53:
 387 01ea 80EC      		ldi r24,lo8(-64)
 388 01ec 8093 0000 		sts PacketBytes+1,r24
 389               	.L16:
 390               	.LM54:
 391 01f0 0E94 0000 		call V2P_SendPacket
 392               	/* epilogue: frame size=0 */
 393 01f4 0895      		ret
 394               	/* epilogue end (size=1) */
 395               	/* function V2P_GetSetParamater size 158 (157) */
 396               	.LFE11:
 398               	.global	V2P_IncrementCurrAddress
 400               	V2P_IncrementCurrAddress:
 401               	.LFB12:
 402               	.LM55:
 403               	/* prologue: frame size=0 */
 404               	/* prologue end (size=0) */
 405               	.LM56:
 406 01f6 8091 0000 		lds r24,CurrAddress
 407 01fa 9091 0000 		lds r25,(CurrAddress)+1
 408 01fe A091 0000 		lds r26,(CurrAddress)+2
 409 0202 B091 0000 		lds r27,(CurrAddress)+3
 410 0206 0196      		adiw r24,1
 411 0208 A11D      		adc r26,__zero_reg__
 412 020a B11D      		adc r27,__zero_reg__
 413 020c 8093 0000 		sts CurrAddress,r24
 414 0210 9093 0000 		sts (CurrAddress)+1,r25
 415 0214 A093 0000 		sts (CurrAddress)+2,r26
 416 0218 B093 0000 		sts (CurrAddress)+3,r27
 417               	/* epilogue: frame size=0 */
 418 021c 0895      		ret
 419               	/* epilogue end (size=1) */
 420               	/* function V2P_IncrementCurrAddress size 20 (19) */
 421               	.LFE12:
 423               	.global	V2P_CheckForExtendedAddress
 425               	V2P_CheckForExtendedAddress:
 426               	.LFB13:
 427               	.LM57:
 428               	/* prologue: frame size=0 */
 429               	/* prologue end (size=0) */
 430               	.LM58:
 431 021e 8091 0000 		lds r24,CurrAddress
 432 0222 9091 0000 		lds r25,(CurrAddress)+1
 433 0226 A091 0000 		lds r26,(CurrAddress)+2
 434 022a B091 0000 		lds r27,(CurrAddress)+3
 435 022e B7FF      		sbrs r27,7
 436 0230 1EC0      		rjmp .L42
 437               	.LM59:
 438 0232 8DE4      		ldi r24,lo8(77)
 439 0234 0E94 0000 		call USI_SPITransmit
 440               	.LM60:
 441 0238 80E0      		ldi r24,lo8(0)
 442 023a 0E94 0000 		call USI_SPITransmit
 443               	.LM61:
 444 023e 8091 0000 		lds r24,CurrAddress+2
 445 0242 0E94 0000 		call USI_SPITransmit
 446               	.LM62:
 447 0246 80E0      		ldi r24,lo8(0)
 448 0248 0E94 0000 		call USI_SPITransmit
 449               	.LM63:
 450 024c 8091 0000 		lds r24,CurrAddress
 451 0250 9091 0000 		lds r25,(CurrAddress)+1
 452 0254 A091 0000 		lds r26,(CurrAddress)+2
 453 0258 B091 0000 		lds r27,(CurrAddress)+3
 454 025c BF77      		andi r27,hhi8(2147483647)
 455 025e 8093 0000 		sts CurrAddress,r24
 456 0262 9093 0000 		sts (CurrAddress)+1,r25
 457 0266 A093 0000 		sts (CurrAddress)+2,r26
 458 026a B093 0000 		sts (CurrAddress)+3,r27
 459               	.L42:
 460 026e 0895      		ret
 461               	/* epilogue: frame size=0 */
 462               	/* epilogue: noreturn */
 463               	/* epilogue end (size=0) */
 464               	/* function V2P_CheckForExtendedAddress size 41 (41) */
 465               	.LFE13:
 467               	.global	V2P_RunStateMachine
 469               	V2P_RunStateMachine:
 470               	.LFB8:
 471               	.LM64:
 472               	/* prologue: frame size=0 */
 473 0270 EF92      		push r14
 474 0272 FF92      		push r15
 475 0274 0F93      		push r16
 476 0276 1F93      		push r17
 477 0278 CF93      		push r28
 478               	/* prologue end (size=5) */
 479               	.LM65:
 480 027a C0E0      		ldi r28,lo8(0)
 481               	.LM66:
 482 027c EE24      		clr r14
 483 027e FF24      		clr r15
 484               	.LM67:
 485 0280 8091 C100 		lds r24,193
 486 0284 8078      		andi r24,lo8(-128)
 487 0286 8861      		ori r24,lo8(24)
 488 0288 8093 C100 		sts 193,r24
 489               	.LM68:
 490 028c 0E94 0000 		call BUFF_InitialiseBuffer
 491               	.LM69:
 492 0290 0E94 0000 		call TIMEOUT_SetupTimeoutTimer
 493               	.LM70:
 494 0294 C093 0000 		sts InProgrammingMode,r28
 495               	.LM71:
 496 0298 1092 0000 		sts CurrAddress,__zero_reg__
 497 029c 1092 0000 		sts (CurrAddress)+1,__zero_reg__
 498 02a0 1092 0000 		sts (CurrAddress)+2,__zero_reg__
 499 02a4 1092 0000 		sts (CurrAddress)+3,__zero_reg__
 500               	.L97:
 501               	.LM72:
 502 02a8 8091 0000 		lds r24,TimeOut
 503 02ac 8130      		cpi r24,lo8(1)
 504 02ae 11F4      		brne .L47
 505               	.LM73:
 506 02b0 C9E0      		ldi r28,lo8(9)
 507 02b2 05C0      		rjmp .L48
 508               	.L47:
 509               	.LM74:
 510 02b4 CC23      		tst r28
 511 02b6 19F0      		breq .L48
 512               	.LM75:
 513 02b8 83E0      		ldi r24,lo8(3)
 514 02ba 8093 8100 		sts 129,r24
 515               	.L48:
 516               	.LM76:
 517 02be 8C2F      		mov r24,r28
 518 02c0 9927      		clr r25
 519 02c2 8430      		cpi r24,4
 520 02c4 9105      		cpc r25,__zero_reg__
 521 02c6 09F4      		brne .+2
 522 02c8 6DC0      		rjmp .L61
 523 02ca 8530      		cpi r24,5
 524 02cc 9105      		cpc r25,__zero_reg__
 525 02ce 94F4      		brge .L86
 526 02d0 8130      		cpi r24,1
 527 02d2 9105      		cpc r25,__zero_reg__
 528 02d4 09F4      		brne .+2
 529 02d6 4CC0      		rjmp .L56
 530 02d8 8230      		cpi r24,2
 531 02da 9105      		cpc r25,__zero_reg__
 532 02dc 1CF4      		brge .L87
 533 02de 892B      		or r24,r25
 534 02e0 B1F1      		breq .L53
 535 02e2 E2CF      		rjmp .L97
 536               	.L87:
 537 02e4 8230      		cpi r24,2
 538 02e6 9105      		cpc r25,__zero_reg__
 539 02e8 09F4      		brne .+2
 540 02ea 48C0      		rjmp .L59
 541 02ec 0397      		sbiw r24,3
 542 02ee 09F4      		brne .+2
 543 02f0 4EC0      		rjmp .L60
 544 02f2 DACF      		rjmp .L97
 545               	.L86:
 546 02f4 8730      		cpi r24,7
 547 02f6 9105      		cpc r25,__zero_reg__
 548 02f8 09F4      		brne .+2
 549 02fa 85C0      		rjmp .L70
 550 02fc 8830      		cpi r24,8
 551 02fe 9105      		cpc r25,__zero_reg__
 552 0300 44F4      		brge .L88
 553 0302 8530      		cpi r24,5
 554 0304 9105      		cpc r25,__zero_reg__
 555 0306 09F4      		brne .+2
 556 0308 62C0      		rjmp .L64
 557 030a 0697      		sbiw r24,6
 558 030c 09F4      		brne .+2
 559 030e 67C0      		rjmp .L67
 560 0310 CBCF      		rjmp .L97
 561               	.L88:
 562 0312 8830      		cpi r24,8
 563 0314 9105      		cpc r25,__zero_reg__
 564 0316 79F0      		breq .L52
 565 0318 0997      		sbiw r24,9
 566 031a 31F6      		brne .L97
 567               	.LM77:
 568 031c 82E0      		ldi r24,lo8(2)
 569 031e 90E0      		ldi r25,hi8(2)
 570 0320 9093 0000 		sts (MessageSize)+1,r25
 571 0324 8093 0000 		sts MessageSize,r24
 572               	.LM78:
 573 0328 80EC      		ldi r24,lo8(-64)
 574 032a 8093 0000 		sts PacketBytes+1,r24
 575               	.LM79:
 576 032e 1092 0000 		sts TimeOut,__zero_reg__
 577               	.LM80:
 578 0332 0E94 0000 		call V2P_SendPacket
 579               	.L52:
 580               	.LM81:
 581 0336 0E94 0000 		call BUFF_InitialiseBuffer
 582               	.LM82:
 583 033a 1092 8100 		sts 129,__zero_reg__
 584 033e 1092 0000 		sts Ticks,__zero_reg__
 585 0342 1092 8500 		sts (132)+1,__zero_reg__
 586 0346 1092 8400 		sts 132,__zero_reg__
 587               	.LM83:
 588 034a C0E0      		ldi r28,lo8(0)
 589               	.LM84:
 590 034c ADCF      		rjmp .L97
 591               	.L53:
 592               	.LM85:
 593 034e 8091 0000 		lds r24,BuffElements
 594 0352 8111      		cpse r24,__zero_reg__
 595               	.LM86:
 596 0354 C1E0      		ldi r28,lo8(1)
 597               	.L54:
 598               	.LM87:
 599 0356 F29B      		sbis 62-0x20,2
 600 0358 A7CF      		rjmp .L97
 601 035a 8091 0000 		lds r24,InProgrammingMode
 602 035e 8823      		tst r24
 603 0360 09F0      		breq .+2
 604 0362 A2CF      		rjmp .L97
 605               	.LM88:
 606 0364 8091 C100 		lds r24,193
 607 0368 8078      		andi r24,lo8(-128)
 608 036a 8093 C100 		sts 193,r24
 609               	.LM89:
 610 036e EEC0      		rjmp .L44
 611               	.L56:
 612               	.LM90:
 613 0370 0E94 0000 		call USART_Rx
 614 0374 8B31      		cpi r24,lo8(27)
 615 0376 89F5      		brne .L65
 616               	.LM91:
 617 0378 C2E0      		ldi r28,lo8(2)
 618 037a 96CF      		rjmp .L97
 619               	.L59:
 620               	.LM92:
 621 037c 0E94 0000 		call USART_Rx
 622 0380 9927      		clr r25
 623 0382 9093 0000 		sts (SequenceNum)+1,r25
 624 0386 8093 0000 		sts SequenceNum,r24
 625               	.LM93:
 626 038a C3E0      		ldi r28,lo8(3)
 627               	.LM94:
 628 038c 8DCF      		rjmp .L97
 629               	.L60:
 630               	.LM95:
 631 038e 0E94 0000 		call USART_Rx
 632 0392 9927      		clr r25
 633 0394 982F      		mov r25,r24
 634 0396 8827      		clr r24
 635 0398 9093 0000 		sts (MessageSize)+1,r25
 636 039c 8093 0000 		sts MessageSize,r24
 637               	.LM96:
 638 03a0 C4E0      		ldi r28,lo8(4)
 639               	.LM97:
 640 03a2 82CF      		rjmp .L97
 641               	.L61:
 642               	.LM98:
 643 03a4 0E94 0000 		call USART_Rx
 644 03a8 282F      		mov r18,r24
 645 03aa 3327      		clr r19
 646 03ac 8091 0000 		lds r24,MessageSize
 647 03b0 9091 0000 		lds r25,(MessageSize)+1
 648 03b4 822B      		or r24,r18
 649 03b6 932B      		or r25,r19
 650 03b8 9093 0000 		sts (MessageSize)+1,r25
 651 03bc 8093 0000 		sts MessageSize,r24
 652               	.LM99:
 653 03c0 8351      		subi r24,lo8(275)
 654 03c2 9140      		sbci r25,hi8(275)
 655 03c4 50F4      		brsh .L65
 656               	.LM100:
 657 03c6 C5E0      		ldi r28,lo8(5)
 658               	.LM101:
 659 03c8 EE24      		clr r14
 660 03ca FF24      		clr r15
 661 03cc 6DCF      		rjmp .L97
 662               	.L64:
 663               	.LM102:
 664 03ce 0E94 0000 		call USART_Rx
 665 03d2 8E30      		cpi r24,lo8(14)
 666 03d4 11F4      		brne .L65
 667               	.LM103:
 668 03d6 C6E0      		ldi r28,lo8(6)
 669 03d8 67CF      		rjmp .L97
 670               	.L65:
 671               	.LM104:
 672 03da C9E0      		ldi r28,lo8(9)
 673               	.LM105:
 674 03dc 65CF      		rjmp .L97
 675               	.L67:
 676               	.LM106:
 677 03de 8091 0000 		lds r24,MessageSize
 678 03e2 9091 0000 		lds r25,(MessageSize)+1
 679 03e6 E816      		cp r14,r24
 680 03e8 F906      		cpc r15,r25
 681 03ea 11F4      		brne .L68
 682               	.LM107:
 683 03ec C7E0      		ldi r28,lo8(7)
 684 03ee 5CCF      		rjmp .L97
 685               	.L68:
 686               	.LM108:
 687 03f0 8701      		movw r16,r14
 688 03f2 0050      		subi r16,lo8(-(PacketBytes))
 689 03f4 1040      		sbci r17,hi8(-(PacketBytes))
 690 03f6 0894      		sec
 691 03f8 E11C      		adc r14,__zero_reg__
 692 03fa F11C      		adc r15,__zero_reg__
 693 03fc 0E94 0000 		call USART_Rx
 694 0400 F801      		movw r30,r16
 695 0402 8083      		st Z,r24
 696               	.LM109:
 697 0404 51CF      		rjmp .L97
 698               	.L70:
 699               	.LM110:
 700 0406 0E94 0000 		call V2P_GetChecksum
 701 040a 182F      		mov r17,r24
 702 040c 0E94 0000 		call USART_Rx
 703 0410 1817      		cp r17,r24
 704 0412 09F0      		breq .+2
 705 0414 8EC0      		rjmp .L71
 706               	.LM111:
 707 0416 8091 0000 		lds r24,PacketBytes
 708 041a 9927      		clr r25
 709 041c 8430      		cpi r24,4
 710 041e 9105      		cpc r25,__zero_reg__
 711 0420 3CF4      		brge .L84
 712 0422 8230      		cpi r24,2
 713 0424 9105      		cpc r25,__zero_reg__
 714 0426 0CF0      		brlt .+2
 715 0428 7BC0      		rjmp .L82
 716 042a 0197      		sbiw r24,1
 717 042c 39F0      		breq .L73
 718 042e 7BC0      		rjmp .L83
 719               	.L84:
 720 0430 8630      		cpi r24,6
 721 0432 9105      		cpc r25,__zero_reg__
 722 0434 E9F0      		breq .L79
 723 0436 0797      		sbiw r24,7
 724 0438 99F0      		breq .L78
 725 043a 75C0      		rjmp .L83
 726               	.L73:
 727               	.LM112:
 728 043c 8BE0      		ldi r24,lo8(11)
 729 043e 90E0      		ldi r25,hi8(11)
 730 0440 9093 0000 		sts (MessageSize)+1,r25
 731 0444 8093 0000 		sts MessageSize,r24
 732 0448 A0E0      		ldi r26,lo8(PacketBytes)
 733 044a B0E0      		ldi r27,hi8(PacketBytes)
 734 044c E0E0      		ldi r30,lo8(SignonResponse)
 735 044e F0E0      		ldi r31,hi8(SignonResponse)
 736 0450 9AE0      		ldi r25,lo8(10)
 737               	.L77:
 738               	.LBB5:
 739               	.LBB6:
 740               	.LM113:
 741               	/* #APP */
 742 0452 8491      		lpm r24, Z
 743               		
 744               	/* #NOAPP */
 745               	.LBE6:
 746 0454 8D93      		st X+,r24
 747               	.LM114:
 748 0456 9150      		subi r25,lo8(-(-1))
 749 0458 3196      		adiw r30,1
 750 045a 97FF      		sbrs r25,7
 751 045c FACF      		rjmp .L77
 752 045e 72C0      		rjmp .L95
 753               	.L78:
 754               	.LBE5:
 755               	.LM115:
 756 0460 82E0      		ldi r24,lo8(2)
 757 0462 90E0      		ldi r25,hi8(2)
 758 0464 9093 0000 		sts (MessageSize)+1,r25
 759 0468 8093 0000 		sts MessageSize,r24
 760               	.LM116:
 761 046c 80EC      		ldi r24,lo8(-64)
 762 046e 68C0      		rjmp .L96
 763               	.L79:
 764               	.LM117:
 765 0470 82E0      		ldi r24,lo8(2)
 766 0472 90E0      		ldi r25,hi8(2)
 767 0474 9093 0000 		sts (MessageSize)+1,r25
 768 0478 8093 0000 		sts MessageSize,r24
 769               	.LM118:
 770 047c 0E94 0000 		call V2P_CheckForExtendedAddress
 771               	.LM119:
 772 0480 8091 0000 		lds r24,PacketBytes+1
 773 0484 9927      		clr r25
 774 0486 AA27      		clr r26
 775 0488 BB27      		clr r27
 776 048a B82F      		mov r27,r24
 777 048c AA27      		clr r26
 778 048e 9927      		clr r25
 779 0490 8827      		clr r24
 780 0492 2091 0000 		lds r18,PacketBytes+2
 781 0496 3327      		clr r19
 782 0498 4427      		clr r20
 783 049a 5527      		clr r21
 784 049c A901      		movw r20,r18
 785 049e 3327      		clr r19
 786 04a0 2227      		clr r18
 787 04a2 822B      		or r24,r18
 788 04a4 932B      		or r25,r19
 789 04a6 A42B      		or r26,r20
 790 04a8 B52B      		or r27,r21
 791 04aa 2091 0000 		lds r18,PacketBytes+3
 792 04ae 3327      		clr r19
 793 04b0 4427      		clr r20
 794 04b2 5527      		clr r21
 795 04b4 542F      		mov r21,r20
 796 04b6 432F      		mov r20,r19
 797 04b8 322F      		mov r19,r18
 798 04ba 2227      		clr r18
 799 04bc 822B      		or r24,r18
 800 04be 932B      		or r25,r19
 801 04c0 A42B      		or r26,r20
 802 04c2 B52B      		or r27,r21
 803 04c4 2091 0000 		lds r18,PacketBytes+4
 804 04c8 3327      		clr r19
 805 04ca 4427      		clr r20
 806 04cc 5527      		clr r21
 807 04ce 822B      		or r24,r18
 808 04d0 932B      		or r25,r19
 809 04d2 A42B      		or r26,r20
 810 04d4 B52B      		or r27,r21
 811 04d6 8093 0000 		sts CurrAddress,r24
 812 04da 9093 0000 		sts (CurrAddress)+1,r25
 813 04de A093 0000 		sts (CurrAddress)+2,r26
 814 04e2 B093 0000 		sts (CurrAddress)+3,r27
 815               	.LM120:
 816 04e6 8091 0000 		lds r24,InPMMode
 817 04ea 8823      		tst r24
 818 04ec B1F0      		breq .L80
 819               	.LM121:
 820 04ee 8091 0000 		lds r24,CurrPageAddress
 821 04f2 9091 0000 		lds r25,(CurrPageAddress)+1
 822 04f6 0E94 0000 		call DF_CopyBufferToFlashPage
 823               	.LM122:
 824 04fa 8091 0000 		lds r24,MemoryType
 825 04fe 0E94 0000 		call PM_SetupDFAddressCounters
 826               	.LM123:
 827 0502 8091 0000 		lds r24,CurrPageAddress
 828 0506 9091 0000 		lds r25,(CurrPageAddress)+1
 829 050a 0E94 0000 		call DF_CopyFlashPageToBuffer
 830               	.LM124:
 831 050e 8091 0000 		lds r24,CurrBuffByte
 832 0512 9091 0000 		lds r25,(CurrBuffByte)+1
 833 0516 0E94 0000 		call DF_BufferWriteEnable
 834               	.L80:
 835               	.LM125:
 836 051a 1092 0000 		sts PacketBytes+1,__zero_reg__
 837 051e 12C0      		rjmp .L95
 838               	.L82:
 839               	.LM126:
 840 0520 0E94 0000 		call V2P_GetSetParamater
 841               	.LM127:
 842 0524 11C0      		rjmp .L94
 843               	.L83:
 844               	.LM128:
 845 0526 E091 0000 		lds r30,InterpretPacketRoutine
 846 052a F091 0000 		lds r31,(InterpretPacketRoutine)+1
 847 052e 0995      		icall
 848 0530 0BC0      		rjmp .L94
 849               	.L71:
 850               	.LM129:
 851 0532 82E0      		ldi r24,lo8(2)
 852 0534 90E0      		ldi r25,hi8(2)
 853 0536 9093 0000 		sts (MessageSize)+1,r25
 854 053a 8093 0000 		sts MessageSize,r24
 855               	.LM130:
 856 053e 81EC      		ldi r24,lo8(-63)
 857               	.L96:
 858 0540 8093 0000 		sts PacketBytes+1,r24
 859               	.L95:
 860               	.LM131:
 861 0544 0E94 0000 		call V2P_SendPacket
 862               	.L94:
 863               	.LM132:
 864 0548 C8E0      		ldi r28,lo8(8)
 865 054a AECE      		rjmp .L97
 866               	.L44:
 867               	/* epilogue: frame size=0 */
 868 054c CF91      		pop r28
 869 054e 1F91      		pop r17
 870 0550 0F91      		pop r16
 871 0552 FF90      		pop r15
 872 0554 EF90      		pop r14
 873 0556 0895      		ret
 874               	/* epilogue end (size=6) */
 875               	/* function V2P_RunStateMachine size 382 (371) */
 876               	.LFE8:
 878               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 V2Protocol.c
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:23     .bss:00000000 Param_ControllerInit
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:29     .bss:00000001 CurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:35     .bss:00000005 InProgrammingMode
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:41     .bss:00000006 MessageSize
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:47     .bss:00000008 SequenceNum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:53     .bss:0000000a PacketBytes
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:59     .data:00000000 InterpretPacketRoutine
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:65     .progmem.data:00000000 SignonResponse
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:80     .progmem.data:0000000b VersionData
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:87     .text:00000000 V2P_GetChecksum
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:141    .text:00000042 V2P_SendPacket
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:212    .text:000000c2 V2P_GetSetParamater
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:400    .text:000001f6 V2P_IncrementCurrAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:425    .text:0000021e V2P_CheckForExtendedAddress
C:\DOCUME~1\Dean\LOCALS~1\Temp/ccucbaaa.s:469    .text:00000270 V2P_RunStateMachine

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
AICI_InterpretPacket
USART_Tx
Param_SCKDuration
eeprom_write_byte_169
USI_SPISetSpeed
Param_ResetPolarity
eeprom_read_byte_169
MAIN_ResetCSLine
USI_SPITransmit
BUFF_InitialiseBuffer
TIMEOUT_SetupTimeoutTimer
TimeOut
Ticks
BuffElements
USART_Rx
InPMMode
CurrPageAddress
DF_CopyBufferToFlashPage
MemoryType
PM_SetupDFAddressCounters
DF_CopyFlashPageToBuffer
CurrBuffByte
DF_BufferWriteEnable
